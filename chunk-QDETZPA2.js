import{a as Fe}from"./chunk-OZIHC7ND.js";import{e as F}from"./chunk-27662H53.js";import{b as Te}from"./chunk-L6LDCXM6.js";import{a as gt}from"./chunk-ZHE4O2IY.js";import{a as he,b as fe}from"./chunk-SHJRNU5D.js";import{a as ke}from"./chunk-RLB6QOPE.js";import{$ as Ve,G as De,M as pe,N as Ct,O as yt,P as bt,R as St,S as xt,T as ze,X as N,Y as Et,a as ne,aa as Pe,b as oe,c as h,e as ae,f as se,fa as qe,ga as Le,i as le,j as vt,k as ce,l as me,m as de,n as Me,o as ue,r as _t,s as Ne,u as Be,w as je}from"./chunk-COXHLCCB.js";import"./chunk-OVKFVBDW.js";import{$a as O,Aa as Ue,Ba as W,Ca as J,Cb as ct,Db as M,Eb as mt,Fb as D,Gb as te,H as Y,Ha as o,Hb as dt,Ia as n,J as $,Ja as d,Jb as ut,Kb as w,Lb as pt,Ma as rt,Mb as ht,Na as P,Oa as S,P as I,Pa as g,Q as K,Qa as nt,Ra as ot,Ua as Oe,Va as U,Vb as ie,Wa as k,Wb as ft,X as _,Xa as T,Xb as re,Y as C,Ya as B,Yb as G,Za as l,_a as q,ac as we,ca as be,da as L,ea as Se,eb as ee,fb as j,gb as He,h as V,ha as Ce,hb as y,ib as Ee,j as Je,ja as s,jb as at,ka as f,n as A,na as et,pb as st,qa as tt,qb as lt,tb as z,ua as xe,va as p,wa as E,wb as Q,xa as m,xb as H,ya as it,yb as Ie}from"./chunk-5BBGCJT5.js";import{a as Ae,g as R}from"./chunk-6DTZ7UCQ.js";function qt(t,c){if(t&1&&(o(0,"section",2)(1,"div",3)(2,"h1"),l(3,"Dashboard"),n(),o(4,"h4"),l(5,"Latest updates"),n()(),o(6,"div",4)(7,"article",5)(8,"div",6),d(9,"i",7),o(10,"h3"),l(11,"Orders"),n()(),o(12,"div",8)(13,"p"),l(14),n()()(),o(15,"article",9)(16,"div",6),d(17,"i",10),o(18,"h3"),l(19,"Users"),n()(),o(20,"div",8)(21,"p"),l(22),n()()(),o(23,"article",11)(24,"div",6),d(25,"i",12),o(26,"h3"),l(27,"Products"),n()(),o(28,"div",8)(29,"p"),l(30),n()()(),o(31,"article",13)(32,"div",6),d(33,"i",14),o(34,"h3"),l(35,"Total Sales"),n()(),o(36,"div",8)(37,"p"),l(38),st(39,"currency"),n()()()()()),t&2){let e=g();s(14),q(e.statistics[0].ordersCount),s(8),q(e.statistics[1].usersCount),s(8),q(e.statistics[2].productsCount),s(8),q(lt(39,4,e.statistics[3].totalSales))}}function Lt(t,c){t&1&&(o(0,"div",15)(1,"p"),d(2,"i",16),n()())}var It=(()=>{let c=class c{constructor(i,r,a){this.ordersService=i,this.usersService=r,this.productsService=a}ngOnInit(){Je([this.ordersService.getOrdersCount(),this.usersService.getUsersCount(),this.productsService.getProductsCount(),this.ordersService.getTotalSales()]).subscribe({next:i=>{this.statistics=i}})}};c.\u0275fac=function(r){return new(r||c)(f(gt),f(Te),f(ke))},c.\u0275cmp=I({type:c,selectors:[["admin-dashboard"]],standalone:!0,features:[j],decls:4,vars:2,consts:[["loader",""],["class","dashboard-page",4,"ngIf","ngIfElse"],[1,"dashboard-page"],[1,"header"],[1,"summary"],["routerLink","/order-statistics",1,"orders"],[1,"icon-heading"],[1,"pi","pi-shopping-cart"],[1,"value"],["routerLink","/user-statistics",1,"users"],[1,"pi","pi-user"],["routerLink","/product-statistics",1,"products"],[1,"pi","pi-th-large"],["routerLink","/total-sales-statistics",1,"total-sales"],[1,"pi","pi-dollar"],[1,"loader-container"],[1,"pi","pi-spin","pi-spinner"]],template:function(r,a){if(r&1&&(p(0,qt,40,6,"section",1)(1,Lt,3,0,"ng-template",null,0,z),d(3,"router-outlet")),r&2){let u=B(2);m("ngIf",a.statistics)("ngIfElse",u)}},dependencies:[w,D,ut,we,ft,G]});let t=c;return t})();var At=["input"],Ut=(t,c,e)=>({"p-inputswitch p-component":!0,"p-inputswitch-checked":t,"p-disabled":c,"p-focus":e}),Ot={provide:ne,useExisting:Y(()=>ye),multi:!0},ye=(()=>{class t{cd;style;styleClass;tabindex;inputId;name;disabled;readonly;trueValue=!0;falseValue=!1;ariaLabel;ariaLabelledBy;autofocus;onChange=new L;input;modelValue=!1;focused=!1;onModelChange=()=>{};onModelTouched=()=>{};constructor(e){this.cd=e}onClick(e){!this.disabled&&!this.readonly&&(this.modelValue=this.checked()?this.falseValue:this.trueValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:e,checked:this.modelValue}),this.input.nativeElement.focus())}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}writeValue(e){this.modelValue=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}static \u0275fac=function(i){return new(i||t)(f(Q))};static \u0275cmp=I({type:t,selectors:[["p-inputSwitch"]],viewQuery:function(i,r){if(i&1&&U(At,5),i&2){let a;k(a=T())&&(r.input=a.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:[2,"tabindex","tabindex",Ie],inputId:"inputId",name:"name",disabled:[2,"disabled","disabled",H],readonly:[2,"readonly","readonly",H],trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",autofocus:[2,"autofocus","autofocus",H]},outputs:{onChange:"onChange"},features:[ee([Ot]),xe],decls:5,vars:23,consts:[["input",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["type","checkbox","role","switch","pAutoFocus","",3,"focus","blur","checked","disabled","autofocus"],[1,"p-inputswitch-slider"]],template:function(i,r){if(i&1){let a=P();o(0,"div",1),S("click",function(v){return _(a),C(r.onClick(v))}),o(1,"div",2)(2,"input",3,0),S("focus",function(){return _(a),C(r.onFocus())})("blur",function(){return _(a),C(r.onBlur())}),n()(),d(4,"span",4),n()}i&2&&(W(r.styleClass),m("ngClass",at(19,Ut,r.checked(),r.disabled,r.focused))("ngStyle",r.style),E("data-pc-name","inputswitch")("data-pc-section","root"),s(),E("data-pc-section","hiddenInputWrapper")("data-p-hidden-accessible",!0),s(),m("checked",r.checked())("disabled",r.disabled)("autofocus",r.autofocus),E("id",r.inputId)("aria-checked",r.checked())("aria-labelledby",r.ariaLabelledBy)("aria-label",r.ariaLabel)("name",r.name)("tabindex",r.tabindex)("data-pc-section","hiddenInput"),s(2),E("data-pc-section","slider"))},dependencies:[M,te,Ve],styles:[`@layer primeng{.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;inset:0;border:1px solid transparent}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}}
`],encapsulation:2,changeDetection:0})}return t})(),Re=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=K({type:t});static \u0275inj=$({imports:[w,Pe]})}return t})();var Ht=[[["p-header"]]],Nt=["p-header"];function Bt(t,c){t&1&&rt(0)}function jt(t,c){if(t&1&&(o(0,"div",3),ot(1),p(2,Bt,1,0,"ng-container",4),n()),t&2){let e=g();s(2),m("ngTemplateOutlet",e.headerTemplate)}}function zt(t,c){t&1&&(o(0,"div",3)(1,"span",5)(2,"select",6)(3,"option",7),l(4,"Heading"),n(),o(5,"option",8),l(6,"Subheading"),n(),o(7,"option",9),l(8,"Normal"),n()(),o(9,"select",10)(10,"option",9),l(11,"Sans Serif"),n(),o(12,"option",11),l(13,"Serif"),n(),o(14,"option",12),l(15,"Monospace"),n()()(),o(16,"span",5),d(17,"button",13)(18,"button",14)(19,"button",15),n(),o(20,"span",5),d(21,"select",16)(22,"select",17),n(),o(23,"span",5),d(24,"button",18)(25,"button",19),o(26,"select",20),d(27,"option",9),o(28,"option",21),l(29,"center"),n(),o(30,"option",22),l(31,"right"),n(),o(32,"option",23),l(33,"justify"),n()()(),o(34,"span",5),d(35,"button",24)(36,"button",25)(37,"button",26),n(),o(38,"span",5),d(39,"button",27),n()())}var Qt={provide:ne,useExisting:Y(()=>Xe),multi:!0},Xe=(()=>{class t{el;platformId;style;styleClass;placeholder;formats;modules;bounds;scrollingContainer;debug;get readonly(){return this._readonly}set readonly(e){this._readonly=e,this.quill&&(this._readonly?this.quill.disable():this.quill.enable())}onInit=new L;onTextChange=new L;onSelectionChange=new L;templates;toolbar;value;delayedCommand=null;_readonly=!1;onModelChange=()=>{};onModelTouched=()=>{};quill;dynamicQuill;headerTemplate;get isAttachedQuillEditorToDOM(){return this.quillElements?.editorElement?.isConnected}quillElements;constructor(e,i){this.el=e,this.platformId=i,tt(()=>{this.initQuillElements(),this.initQuillEditor()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break}})}writeValue(e){if(this.value=e,this.quill)if(e){let i=()=>{this.quill.setContents(this.quill.clipboard.convert(this.dynamicQuill.version.startsWith("2")?{html:this.value}:this.value))};this.isAttachedQuillEditorToDOM?i():this.delayedCommand=i}else{let i=()=>{this.quill.setText("")};this.isAttachedQuillEditorToDOM?i():this.delayedCommand=i}}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}getQuill(){return this.quill}initQuillEditor(){ht(this.platformId)||(this.dynamicQuill?this.createQuillEditor():import("./chunk-KM5VFJVP.js").then(e=>{this.dynamicQuill=e.default,this.createQuillEditor()}).catch(e=>console.error(e.message)))}createQuillEditor(){this.initQuillElements();let{toolbarElement:e,editorElement:i}=this.quillElements,r={toolbar:e},a=this.modules?Ae(Ae({},r),this.modules):r;this.quill=new this.dynamicQuill(i,{modules:a,placeholder:this.placeholder,readOnly:this.readonly,theme:"snow",formats:this.formats,bounds:this.bounds,debug:this.debug,scrollingContainer:this.scrollingContainer});let u=this.dynamicQuill.version.startsWith("2");this.value&&this.quill.setContents(this.quill.clipboard.convert(u?{html:this.value}:this.value)),this.quill.on("text-change",(v,b,x)=>{if(x==="user"){let Z=u?this.quill.getSemanticHTML():N.findSingle(i,".ql-editor").innerHTML,Pt=this.quill.getText().trim();Z==="<p><br></p>"&&(Z=null),this.onTextChange.emit({htmlValue:Z,textValue:Pt,delta:v,source:x}),this.onModelChange(Z),this.onModelTouched()}}),this.quill.on("selection-change",(v,b,x)=>{this.onSelectionChange.emit({range:v,oldRange:b,source:x})}),this.onInit.emit({editor:this.quill})}initQuillElements(){this.quillElements||(this.quillElements={editorElement:N.findSingle(this.el.nativeElement,"div.p-editor-content"),toolbarElement:N.findSingle(this.el.nativeElement,"div.p-editor-toolbar")})}static \u0275fac=function(i){return new(i||t)(f(be),f(Se))};static \u0275cmp=I({type:t,selectors:[["p-editor"]],contentQueries:function(i,r,a){if(i&1&&(Oe(a,bt,5),Oe(a,St,4)),i&2){let u;k(u=T())&&(r.toolbar=u.first),k(u=T())&&(r.templates=u)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",placeholder:"placeholder",formats:"formats",modules:"modules",bounds:"bounds",scrollingContainer:"scrollingContainer",debug:"debug",readonly:"readonly"},outputs:{onInit:"onInit",onTextChange:"onTextChange",onSelectionChange:"onSelectionChange"},features:[ee([Qt])],ngContentSelectors:Nt,decls:4,vars:6,consts:[[3,"ngClass"],["class","p-editor-toolbar",4,"ngIf"],[1,"p-editor-content",3,"ngStyle"],[1,"p-editor-toolbar"],[4,"ngTemplateOutlet"],[1,"ql-formats"],[1,"ql-header"],["value","1"],["value","2"],["selected",""],[1,"ql-font"],["value","serif"],["value","monospace"],["aria-label","Bold","type","button",1,"ql-bold"],["aria-label","Italic","type","button",1,"ql-italic"],["aria-label","Underline","type","button",1,"ql-underline"],[1,"ql-color"],[1,"ql-background"],["value","ordered","aria-label","Ordered List","type","button",1,"ql-list"],["value","bullet","aria-label","Unordered List","type","button",1,"ql-list"],[1,"ql-align"],["value","center"],["value","right"],["value","justify"],["aria-label","Insert Link","type","button",1,"ql-link"],["aria-label","Insert Image","type","button",1,"ql-image"],["aria-label","Insert Code Block","type","button",1,"ql-code-block"],["aria-label","Remove Styles","type","button",1,"ql-clean"]],template:function(i,r){i&1&&(nt(Ht),o(0,"div",0),p(1,jt,3,1,"div",1)(2,zt,40,0,"div",1),d(3,"div",2),n()),i&2&&(W(r.styleClass),m("ngClass","p-editor-container"),s(),m("ngIf",r.toolbar||r.headerTemplate),s(),m("ngIf",!r.toolbar&&!r.headerTemplate),s(),m("ngStyle",r.style))},dependencies:[M,D,dt,te],styles:[`.p-editor-container .p-editor-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options .ql-picker-item{width:auto;height:auto}
`],encapsulation:2,changeDetection:0})}return t})(),Ft=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=K({type:t});static \u0275inj=$({imports:[w,xt]})}return t})();var _e=t=>({submitted:t}),kt=()=>({height:"220px"});function Zt(t,c){if(t&1&&d(0,"i"),t&2){let e=g(2);J("pi ",e.productId?"pi-cloud-upload":"pi-plus","")}}function Yt(t,c){t&1&&d(0,"i",54)}function $t(t,c){t&1&&(o(0,"small",55),l(1,"Name is required!"),n())}function Kt(t,c){t&1&&(o(0,"small",55),l(1,"Minimum 3 characters!"),n())}function Wt(t,c){t&1&&(o(0,"small",55),l(1,"Brand is required!"),n())}function Jt(t,c){t&1&&(o(0,"small",55),l(1,"Minimum 5 characters!"),n())}function ei(t,c){t&1&&(o(0,"small",55),l(1,"Price is requried!"),n())}function ti(t,c){t&1&&(o(0,"small",55),l(1,"Category is required!"),n())}function ii(t,c){t&1&&(o(0,"small",55),l(1,"Minimum 3 characters!"),n())}function ri(t,c){t&1&&(o(0,"small",55),l(1,"Stock is required!"),n())}function ni(t,c){t&1&&(o(0,"small",55),l(1,"Rating is required!"),n())}function oi(t,c){t&1&&(o(0,"small",55),l(1,"Reviews is required!"),n())}function ai(t,c){if(t&1&&(o(0,"label",40),d(1,"img",56),n()),t&2){let e=g(2);s(),m("src",e.controlsForm.image.value,Ce)}}function si(t,c){if(t&1&&(o(0,"label",40),d(1,"img",56),n()),t&2){let e=g(2);s(),m("src",e.imageSelectedUrl,Ce)}}function li(t,c){t&1&&(o(0,"label",40),d(1,"i",57),n())}function ci(t,c){t&1&&(o(0,"small",55),l(1,"Image is required!"),n())}function mi(t,c){if(t&1&&d(0,"img",59),t&2){let e=c.$implicit;m("src",e,Ce)}}function di(t,c){if(t&1&&(o(0,"label",44),p(1,mi,1,1,"img",58),n()),t&2){let e=g(2);s(),m("ngForOf",e.controlsForm.images.value)}}function ui(t,c){if(t&1&&d(0,"img",59),t&2){let e=c.$implicit;m("src",e,Ce)}}function pi(t,c){if(t&1&&(o(0,"label",44),p(1,ui,1,1,"img",58),n()),t&2){let e=g(2);s(),m("ngForOf",e.gallerySelectedUrls)}}function hi(t,c){t&1&&(o(0,"label",44),d(1,"i",57),n())}function fi(t,c){t&1&&(o(0,"small",55),l(1,"Description is required!"),n())}function gi(t,c){t&1&&(o(0,"small",55),l(1,"Minimum 20 characters!"),n())}function vi(t,c){t&1&&(o(0,"small",55),l(1,"Description is required!"),n())}function _i(t,c){t&1&&(o(0,"small",55),l(1,"Minimum 40 characters!"),n())}function Ci(t,c){if(t&1){let e=P();o(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),l(4),n(),o(5,"p"),l(6),n()(),o(7,"div",5)(8,"button",6),S("click",function(){_(e);let r=g();return C(r.onSubmitForm())}),p(9,Zt,1,3,"i",7)(10,Yt,1,0,"i",8),o(11,"span"),l(12),n()(),o(13,"button",9),d(14,"i",10),o(15,"span"),l(16,"Cancel"),n()()(),o(17,"form",11)(18,"div",12)(19,"div",13)(20,"label",14),l(21,"Name"),n(),d(22,"input",15),p(23,$t,2,0,"small",16)(24,Kt,2,0,"small",16),n(),o(25,"div",17)(26,"label",18),l(27,"Brand"),n(),d(28,"input",19),p(29,Wt,2,0,"small",16)(30,Jt,2,0,"small",16),n(),o(31,"div",20)(32,"label",21),l(33,"Price"),n(),d(34,"input",22),p(35,ei,2,0,"small",16),n(),o(36,"div",23)(37,"label",24),l(38,"Category"),n(),d(39,"p-dropdown",25),p(40,ti,2,0,"small",16)(41,ii,2,0,"small",16),n(),o(42,"div",26)(43,"label",27),l(44,"Stock"),n(),d(45,"input",28),p(46,ri,2,0,"small",16),n(),o(47,"div",29)(48,"label",30),l(49,"Rating"),n(),d(50,"input",31),p(51,ni,2,0,"small",16),n(),o(52,"div",32)(53,"label",33),l(54,"Reviews"),n(),d(55,"input",34),p(56,oi,2,0,"small",16),n(),o(57,"div",35)(58,"label",36),l(59,"Featured"),n(),d(60,"p-inputSwitch",37),n()(),o(61,"div",38)(62,"div",39)(63,"label",40),l(64,"Main image"),n(),o(65,"input",41),S("change",function(r){_(e);let a=g();return C(a.onImageUpload(r))}),n(),p(66,ai,2,1,"label",42)(67,si,2,1,"label",42)(68,li,2,0,"label",42)(69,ci,2,0,"small",16),n(),o(70,"div",43)(71,"label",44),l(72,"Gallery"),n(),o(73,"input",45),S("change",function(r){_(e);let a=g();return C(a.onGalleryUpload(r))}),n(),p(74,di,2,1,"label",46)(75,pi,2,1,"label",46)(76,hi,2,0,"label",46),n()(),o(77,"div",47)(78,"div",48)(79,"label",49),l(80,"Description"),n(),d(81,"p-editor",50),p(82,fi,2,0,"small",16)(83,gi,2,0,"small",16),n(),o(84,"div",51)(85,"label",52),l(86,"Rich Description"),n(),d(87,"p-editor",53),p(88,vi,2,0,"small",16)(89,_i,2,0,"small",16),n()()()()()}if(t&2){let e=g();s(4),O("",e.productId?"Edit":"Add"," Product"),s(2),O("You can ",e.productId?"edit":"add"," products here"),s(3),m("ngIf",!e.isProccessing),s(),m("ngIf",e.isProccessing),s(2),q(e.productId?"Edit":"Add"),s(5),m("formGroup",e.form),s(5),m("ngClass",y(39,_e,e.isSubmitted)),s(),m("ngIf",e.controlsForm.name.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.name.hasError("minlength")&&e.isSubmitted),s(4),m("ngClass",y(41,_e,e.isSubmitted)),s(),m("ngIf",e.controlsForm.brand.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.brand.hasError("minlength")&&e.isSubmitted),s(4),m("ngClass",y(43,_e,e.isSubmitted)),s(),m("ngIf",e.controlsForm.price.hasError("required")&&e.isSubmitted),s(4),m("options",e.categories)("filter",!0),s(),m("ngIf",e.controlsForm.category.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.category.hasError("minlength")&&e.isSubmitted),s(4),m("ngClass",y(45,_e,e.isSubmitted)),s(),m("ngIf",e.controlsForm.countInStock.hasError("required")&&e.isSubmitted),s(4),m("ngClass",y(47,_e,e.isSubmitted)),s(),m("ngIf",e.controlsForm.rating.hasError("required")&&e.isSubmitted),s(4),m("ngClass",y(49,_e,e.isSubmitted)),s(),m("ngIf",e.controlsForm.numReviews.hasError("required")&&e.isSubmitted),s(10),m("ngIf",e.controlsForm.image.value&&e.isImageFormControlString()),s(),m("ngIf",e.imageSelectedUrl),s(),m("ngIf",!e.controlsForm.image.value),s(),m("ngIf",e.controlsForm.image.hasError("required")&&e.isSubmitted),s(5),m("ngIf",e.controlsForm.images.value.length&&e.isImagesFormControlArrayOfStrings()),s(),m("ngIf",e.gallerySelectedUrls.length),s(),m("ngIf",!e.controlsForm.images.value.length),s(5),Ue(He(51,kt)),s(),m("ngIf",e.controlsForm.description.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.description.hasError("minlength")&&e.isSubmitted),s(4),Ue(He(52,kt)),s(),m("ngIf",e.controlsForm.richDescription.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.richDescription.hasError("minlength")&&e.isSubmitted)}}function yi(t,c){t&1&&(o(0,"div",60),d(1,"i",54),n())}var Ye=(()=>{let c=class c{constructor(i,r,a,u,v,b,x){this.formBuilder=i,this.productsService=r,this.messageService=a,this.router=u,this.route=v,this.categoriesService=b,this.changeDetectorRef=x,this.form=this.formBuilder.group({id:[""],name:["",[h.required,h.minLength(3)]],description:["",[h.required,h.minLength(20)]],richDescription:["",[h.required,h.minLength(40)]],image:["",[h.required]],images:[[]],brand:["",[h.required,h.minLength(5)]],price:[0,[h.required]],category:["",[h.required,h.minLength(3)]],countInStock:[0,[h.required]],rating:[0,[h.required]],numReviews:[0,[h.required]],isFeatured:[!1]}),this.productId="",this.isCmpInitialized=!1,this.isSubmitted=!1,this.imageSelectedUrl=null,this.gallerySelectedUrls=[],this.formImage="",this.isGalleryChanged=!1,this.isProccessing=!1}ngOnInit(){this._checkParams(),this._getCategories()}onSubmitForm(){if(this.form.pristine&&this.formImage===this.form.value.image&&this.form.value.images instanceof Array)return this.productId?this.messageService.add({severity:"error",summary:"Error",detail:"Edit atleast 1 field!"}):this.messageService.add({severity:"error",summary:"Error",detail:"Fill the fields first!"});if(this.isSubmitted=!0,this.form.invalid)return;this.isProccessing=!0;let i=new FormData;Object.keys(this.form.value).forEach(u=>{u==="category"?i.append(u,this.form.value[u].id):u==="images"?i.append(u,""):i.append(u,this.form.value[u])});let a=new FormData;if(this.form.value.images instanceof FileList)for(let u=0;u<this.form.value.images.length;u++){let v=this.form.value.images[u];a.append("images",v)}this.productId?this._editProduct(i,a):this._addProduct(i,a)}isInputElement(i){return i instanceof HTMLInputElement}onImageUpload(i){if(this.imageSelectedUrl=null,this.form.patchValue({image:""}),i.target&&this.isInputElement(i.target)){let r=i.target.files[0];if(r){let a=new FileReader;a.onload=()=>{this.form.patchValue({image:r}),this.form.get("image")?.updateValueAndValidity(),a.result&&(this.imageSelectedUrl=a.result,this.changeDetectorRef.markForCheck())},a.readAsDataURL(r)}}}onGalleryUpload(i){if(i.target&&this.isInputElement(i.target)&&i.target.files?.length){let r=i.target.files;if(this.form.patchValue({images:r}),r)for(let a=0;a<r.length;a++){let u=r[a];if(u){let v=new FileReader;v.onload=()=>{v.result&&(this.gallerySelectedUrls.push(v.result),this.changeDetectorRef.markForCheck())},v.readAsDataURL(u)}}}}_checkParams(){this.paramsSubscription=this.route.params.subscribe(i=>{i.productId?this.productsService.getProductById(i.productId).subscribe({next:r=>{this.formImage=r.image,this.productId=r.id,this.form.patchValue(r),this.form.updateValueAndValidity(),this.isCmpInitialized=!0,this.changeDetectorRef.markForCheck()},error:r=>{console.error("Cannot get product",r)}}):(this.isCmpInitialized=!0,this.changeDetectorRef.markForCheck())})}_getCategories(){this.categoriesService.getCategories().subscribe({next:i=>{this.categories=i,this.changeDetectorRef.markForCheck()},error:i=>{console.error("Cannot get categories",i)}})}_addProduct(i,r){this.productsService.addProduct(i).subscribe({next:a=>R(this,null,function*(){try{yield V(this.productsService.editProductGallery(r,a.id)),this.isProccessing=!1,this.messageService.add({severity:"success",summary:"Success",detail:`The product "${a.name}" is created successfully!`})}catch(u){console.error("Cannot update gallery",u)}yield V(A(2e3)),this.router.navigateByUrl("/products")}),error:a=>{this.messageService.add({severity:"error",summary:"Error",detail:"The product cannot be created!"}),console.error("The product cannot be created!",a)}})}_editProduct(i,r){this.productsService.editProduct(i).subscribe({next:a=>R(this,null,function*(){try{this.form.value.images instanceof FileList&&(yield V(this.productsService.editProductGallery(r,a.id))),this.isProccessing=!1,this.messageService.add({severity:"success",summary:"Success",detail:`The product "${a.name}" is edited successfully!`})}catch(u){console.error("Cannot update gallery",u)}yield V(A(2e3)),this.router.navigateByUrl("/products")}),error:a=>{this.messageService.add({severity:"error",summary:"Error",detail:"The product cannot be edited!"}),console.error("Cannot edit product",a)}})}isImageFormControlString(){return typeof this.controlsForm.image.value=="string"}isImagesFormControlArrayOfStrings(){let i=this.controlsForm.images.value;return Array.isArray(i)?i.every(r=>typeof r=="string"):!1}get controlsForm(){return this.form.controls}ngOnDestroy(){this.paramsSubscription?.unsubscribe()}};c.\u0275fac=function(r){return new(r||c)(f(de),f(ke),f(pe),f(re),f(ie),f(Fe),f(Q))},c.\u0275cmp=I({type:c,selectors:[["admin-product-form"]],standalone:!0,features:[j],decls:4,vars:2,consts:[["loader",""],["class","products-form-modal",4,"ngIf","ngIfElse"],[1,"products-form-modal"],[1,"products-form-container"],[1,"products-form-heading"],[1,"btns-container"],[1,"btn-create",3,"click"],[3,"class",4,"ngIf"],["class","pi pi-spin pi-spinner",4,"ngIf"],["routerLink","/products",1,"btn-cancel"],[1,"pi","pi-arrow-circle-left"],[3,"formGroup"],[1,"inputs-container"],[1,"name-input"],["for","name"],["formControlName","name","type","text","name","name","id","name",3,"ngClass"],["class","p-error",4,"ngIf"],[1,"brand-input"],["for","brand"],["formControlName","brand","type","text","name","brand","id","brand",3,"ngClass"],[1,"price-input"],["for","price"],["formControlName","price","type","number","name","price","id","price",3,"ngClass"],[1,"category-input"],["for","category"],["formControlName","category","optionLabel","name","filterBy","name","placeholder","Select a Category",3,"options","filter"],[1,"stock-input"],["for","stock"],["formControlName","countInStock","type","number","name","stock","id","stock",3,"ngClass"],[1,"rating-input"],["for","rating"],["formControlName","rating","type","number","name","rating","id","rating",3,"ngClass"],[1,"reviews-input"],["for","reviews"],["formControlName","numReviews","type","number","name","reviews","id","reviews",3,"ngClass"],[1,"featured-input"],["for","featured"],["formControlName","isFeatured","inputId","featured"],[1,"images-container"],[1,"main-image"],["for","main-image"],["type","file","name","main-image","id","main-image","accept","image/*",3,"change"],["for","main-image",4,"ngIf"],[1,"gallery-container"],["for","gallery"],["type","file","name","gallery","id","gallery","multiple","","accept","image/*",3,"change"],["for","gallery",4,"ngIf"],[1,"descriptions-container"],[1,"description-input"],["for","description"],["formControlName","description"],[1,"rich-description-input"],["for","rich-description"],["formControlName","richDescription"],[1,"pi","pi-spin","pi-spinner"],[1,"p-error"],["alt","main image",3,"src"],[1,"pi","pi-image",2,"font-size","40px"],["alt","gallery",3,"src",4,"ngFor","ngForOf"],["alt","gallery",3,"src"],[1,"loader-products"]],template:function(r,a){if(r&1&&(p(0,Ci,90,53,"div",1),d(1,"p-toast"),p(2,yi,2,0,"ng-template",null,0,z)),r&2){let u=B(3);m("ngIf",a.categories&&a.isCmpInitialized)("ngIfElse",u)}},dependencies:[w,M,mt,D,Me,le,oe,vt,ae,se,ue,ce,me,fe,he,G,Re,ye,Le,qe,Ft,Xe],changeDetection:0});let t=c;return t})();var bi=["container"],Si=["input"],xi=["colorSelector"],Ei=["colorHandle"],Ii=["hue"],wi=["hueHandle"],Fi=(t,c)=>({"p-colorpicker p-component":!0,"p-colorpicker-overlay":t,"p-colorpicker-dragging":c}),ki=t=>({"p-disabled":t}),Ti=(t,c)=>({"p-colorpicker-panel":!0,"p-colorpicker-overlay-panel":t,"p-disabled":c}),Mi=(t,c)=>({showTransitionParams:t,hideTransitionParams:c}),Di=t=>({value:"visible",params:t});function Vi(t,c){if(t&1){let e=P();o(0,"input",9,1),S("click",function(){_(e);let r=g();return C(r.onInputClick())})("keydown",function(r){_(e);let a=g();return C(a.onInputKeydown(r))})("focus",function(){_(e);let r=g();return C(r.onInputFocus())}),n()}if(t&2){let e=g();it("background-color",e.inputBgColor),m("ngClass",y(9,ki,e.disabled))("disabled",e.disabled)("autofocus",e.autofocus),E("tabindex",e.tabindex)("id",e.inputId)("data-pc-section","input")("aria-label",e.ariaLabel)}}function Pi(t,c){if(t&1){let e=P();o(0,"div",10),S("click",function(r){_(e);let a=g();return C(a.onOverlayClick(r))})("@overlayAnimation.start",function(r){_(e);let a=g();return C(a.onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){_(e);let a=g();return C(a.onOverlayAnimationEnd(r))}),o(1,"div",11)(2,"div",12,2),S("touchstart",function(r){_(e);let a=g();return C(a.onColorDragStart(r))})("touchmove",function(r){_(e);let a=g();return C(a.onDrag(r))})("touchend",function(){_(e);let r=g();return C(r.onDragEnd())})("mousedown",function(r){_(e);let a=g();return C(a.onColorMousedown(r))}),o(4,"div",13),d(5,"div",14,3),n()(),o(7,"div",15,4),S("mousedown",function(r){_(e);let a=g();return C(a.onHueMousedown(r))})("touchstart",function(r){_(e);let a=g();return C(a.onHueDragStart(r))})("touchmove",function(r){_(e);let a=g();return C(a.onDrag(r))})("touchend",function(){_(e);let r=g();return C(r.onDragEnd())}),d(9,"div",16,5),n()()()}if(t&2){let e=g();m("ngClass",Ee(10,Ti,!e.inline,e.disabled))("@overlayAnimation",y(16,Di,Ee(13,Mi,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",e.inline===!0),E("data-pc-section","panel"),s(),E("data-pc-section","content"),s(),E("data-pc-section","selector"),s(2),E("data-pc-section","color"),s(),E("data-pc-section","colorHandle"),s(2),E("data-pc-section","hue"),s(2),E("data-pc-section","hueHandle")}}var qi={provide:ne,useExisting:Y(()=>$e),multi:!0},$e=(()=>{class t{document;platformId;el;renderer;cd;config;overlayService;style;styleClass;inline;format="hex";appendTo;disabled;tabindex;inputId;autoZIndex=!0;baseZIndex=0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";autofocus;onChange=new L;onShow=new L;onHide=new L;containerViewChild;inputViewChild;value={h:0,s:100,b:100};inputBgColor;shown;overlayVisible;defaultColor="ff0000";onModelChange=()=>{};onModelTouched=()=>{};documentClickListener;documentResizeListener;documentMousemoveListener;documentMouseupListener;documentHueMoveListener;scrollHandler;selfClick;colorDragging;hueDragging;overlay;colorSelectorViewChild;colorHandleViewChild;hueViewChild;hueHandleViewChild;window;constructor(e,i,r,a,u,v,b){this.document=e,this.platformId=i,this.el=r,this.renderer=a,this.cd=u,this.config=v,this.overlayService=b,this.window=this.document.defaultView}set colorSelector(e){this.colorSelectorViewChild=e}set colorHandle(e){this.colorHandleViewChild=e}set hue(e){this.hueViewChild=e}set hueHandle(e){this.hueHandleViewChild=e}get ariaLabel(){return this.config?.getTranslation(ze.ARIA)[ze.SELECT_COLOR]}onHueMousedown(e){this.disabled||(this.bindDocumentMousemoveListener(),this.bindDocumentMouseupListener(),this.hueDragging=!0,this.pickHue(e))}onHueDragStart(e){this.disabled||(this.hueDragging=!0,this.pickHue(e,e.changedTouches[0]))}onColorDragStart(e){this.disabled||(this.colorDragging=!0,this.pickColor(e,e.changedTouches[0]))}pickHue(e,i){let r=i?i.pageY:e.pageY,a=this.hueViewChild?.nativeElement.getBoundingClientRect().top+(this.document.defaultView.pageYOffset||this.document.documentElement.scrollTop||this.document.body.scrollTop||0);this.value=this.validateHSB({h:Math.floor(360*(150-Math.max(0,Math.min(150,r-a)))/150),s:this.value.s,b:this.value.b}),this.updateColorSelector(),this.updateUI(),this.updateModel(),this.onChange.emit({originalEvent:e,value:this.getValueToUpdate()})}onColorMousedown(e){this.disabled||(this.bindDocumentMousemoveListener(),this.bindDocumentMouseupListener(),this.colorDragging=!0,this.pickColor(e))}onDrag(e){this.colorDragging&&(this.pickColor(e,e.changedTouches[0]),e.preventDefault()),this.hueDragging&&(this.pickHue(e,e.changedTouches[0]),e.preventDefault())}onDragEnd(){this.colorDragging=!1,this.hueDragging=!1,this.unbindDocumentMousemoveListener(),this.unbindDocumentMouseupListener()}pickColor(e,i){let r=i?i.pageX:e.pageX,a=i?i.pageY:e.pageY,u=this.colorSelectorViewChild?.nativeElement.getBoundingClientRect(),v=u.top+(this.document.defaultView.pageYOffset||this.document.documentElement.scrollTop||this.document.body.scrollTop||0),b=u.left+this.document.body.scrollLeft,x=Math.floor(100*Math.max(0,Math.min(150,r-b))/150),Z=Math.floor(100*(150-Math.max(0,Math.min(150,a-v)))/150);this.value=this.validateHSB({h:this.value.h,s:x,b:Z}),this.updateUI(),this.updateModel(),this.onChange.emit({originalEvent:e,value:this.getValueToUpdate()})}getValueToUpdate(){let e;switch(this.format){case"hex":e="#"+this.HSBtoHEX(this.value);break;case"rgb":e=this.HSBtoRGB(this.value);break;case"hsb":e=this.value;break}return e}updateModel(){this.onModelChange(this.getValueToUpdate()),this.cd.markForCheck()}writeValue(e){if(e)switch(this.format){case"hex":this.value=this.HEXtoHSB(e);break;case"rgb":this.value=this.RGBtoHSB(e);break;case"hsb":this.value=e;break}else this.value=this.HEXtoHSB(this.defaultColor);this.updateColorSelector(),this.updateUI(),this.cd.markForCheck()}updateColorSelector(){if(this.colorSelectorViewChild){let e={};e.s=100,e.b=100,e.h=this.value.h,this.colorSelectorViewChild.nativeElement.style.backgroundColor="#"+this.HSBtoHEX(e)}}updateUI(){this.colorHandleViewChild&&this.hueHandleViewChild?.nativeElement&&(this.colorHandleViewChild.nativeElement.style.left=Math.floor(150*this.value.s/100)+"px",this.colorHandleViewChild.nativeElement.style.top=Math.floor(150*(100-this.value.b)/100)+"px",this.hueHandleViewChild.nativeElement.style.top=Math.floor(150-150*this.value.h/360)+"px"),this.inputBgColor="#"+this.HSBtoHEX(this.value)}onInputFocus(){this.onModelTouched()}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.inline||(this.overlay=e.element,this.appendOverlay(),this.autoZIndex&&De.set("overlay",this.overlay,this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.updateColorSelector(),this.updateUI());break;case"void":this.onOverlayHide();break}}onOverlayAnimationEnd(e){switch(e.toState){case"visible":this.inline||this.onShow.emit({});break;case"void":this.autoZIndex&&De.clear(e.element),this.onHide.emit({});break}}appendOverlay(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.overlay):N.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.overlay)}alignOverlay(){this.appendTo?N.absolutePosition(this.overlay,this.inputViewChild?.nativeElement):N.relativePosition(this.overlay,this.inputViewChild?.nativeElement)}hide(){this.overlayVisible=!1,this.cd.markForCheck()}onInputClick(){this.selfClick=!0,this.togglePanel()}togglePanel(){this.overlayVisible?this.hide():this.show()}onInputKeydown(e){switch(e.code){case"Space":this.togglePanel(),e.preventDefault();break;case"Escape":case"Tab":this.hide();break;default:break}}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement}),this.selfClick=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}bindDocumentClickListener(){if(!this.documentClickListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(e,"click",()=>{this.selfClick||(this.overlayVisible=!1,this.unbindDocumentClickListener()),this.selfClick=!1,this.cd.markForCheck()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentMousemoveListener(){if(!this.documentMousemoveListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentMousemoveListener=this.renderer.listen(e,"mousemove",i=>{this.colorDragging&&this.pickColor(i),this.hueDragging&&this.pickHue(i)})}}unbindDocumentMousemoveListener(){this.documentMousemoveListener&&(this.documentMousemoveListener(),this.documentMousemoveListener=null)}bindDocumentMouseupListener(){if(!this.documentMouseupListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentMouseupListener=this.renderer.listen(e,"mouseup",()=>{this.colorDragging=!1,this.hueDragging=!1,this.unbindDocumentMousemoveListener(),this.unbindDocumentMouseupListener()})}}unbindDocumentMouseupListener(){this.documentMouseupListener&&(this.documentMouseupListener(),this.documentMouseupListener=null)}bindDocumentResizeListener(){pt(this.platformId)&&(this.documentResizeListener=this.renderer.listen(this.window,"resize",this.onWindowResize.bind(this)))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!N.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Et(this.containerViewChild?.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}validateHSB(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}}validateRGB(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}}validateHEX(e){var i=6-e.length;if(i>0){for(var r=[],a=0;a<i;a++)r.push("0");r.push(e),e=r.join("")}return e}HEXtoRGB(e){let i=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:i>>16,g:(i&65280)>>8,b:i&255}}HEXtoHSB(e){return this.RGBtoHSB(this.HEXtoRGB(e))}RGBtoHSB(e){var i={h:0,s:0,b:0},r=Math.min(e.r,e.g,e.b),a=Math.max(e.r,e.g,e.b),u=a-r;return i.b=a,i.s=a!=0?255*u/a:0,i.s!=0?e.r==a?i.h=(e.g-e.b)/u:e.g==a?i.h=2+(e.b-e.r)/u:i.h=4+(e.r-e.g)/u:i.h=-1,i.h*=60,i.h<0&&(i.h+=360),i.s*=100/255,i.b*=100/255,i}HSBtoRGB(e){var i={r:0,g:0,b:0};let r=e.h,a=e.s*255/100,u=e.b*255/100;if(a==0)i={r:u,g:u,b:u};else{let v=u,b=(255-a)*u/255,x=(v-b)*(r%60)/60;r==360&&(r=0),r<60?(i.r=v,i.b=b,i.g=b+x):r<120?(i.g=v,i.b=b,i.r=v-x):r<180?(i.g=v,i.r=b,i.b=b+x):r<240?(i.b=v,i.r=b,i.g=v-x):r<300?(i.b=v,i.g=b,i.r=b+x):r<360?(i.r=v,i.g=b,i.b=v-x):(i.r=0,i.g=0,i.b=0)}return{r:Math.round(i.r),g:Math.round(i.g),b:Math.round(i.b)}}RGBtoHEX(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];for(var r in i)i[r].length==1&&(i[r]="0"+i[r]);return i.join("")}HSBtoHEX(e){return this.RGBtoHEX(this.HSBtoRGB(e))}onOverlayHide(){this.unbindScrollListener(),this.unbindDocumentResizeListener(),this.unbindDocumentClickListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&this.autoZIndex&&De.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}static \u0275fac=function(i){return new(i||t)(f(ct),f(Se),f(be),f(et),f(Q),f(yt),f(Ct))};static \u0275cmp=I({type:t,selectors:[["p-colorPicker"]],viewQuery:function(i,r){if(i&1&&(U(bi,5),U(Si,5),U(xi,5),U(Ei,5),U(Ii,5),U(wi,5)),i&2){let a;k(a=T())&&(r.containerViewChild=a.first),k(a=T())&&(r.inputViewChild=a.first),k(a=T())&&(r.colorSelector=a.first),k(a=T())&&(r.colorHandle=a.first),k(a=T())&&(r.hue=a.first),k(a=T())&&(r.hueHandle=a.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",inline:[2,"inline","inline",H],format:"format",appendTo:"appendTo",disabled:[2,"disabled","disabled",H],tabindex:"tabindex",inputId:"inputId",autoZIndex:[2,"autoZIndex","autoZIndex",H],baseZIndex:[2,"baseZIndex","baseZIndex",Ie],showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autofocus:[2,"autofocus","autofocus",H]},outputs:{onChange:"onChange",onShow:"onShow",onHide:"onHide"},features:[ee([qi]),xe],decls:4,vars:11,consts:[["container",""],["input",""],["colorSelector",""],["colorHandle",""],["hue",""],["hueHandle",""],[3,"ngStyle","ngClass"],["type","text","class","p-colorpicker-preview p-inputtext","readonly","readonly","pAutoFocus","",3,"ngClass","disabled","backgroundColor","autofocus","click","keydown","focus",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],["type","text","readonly","readonly","pAutoFocus","",1,"p-colorpicker-preview","p-inputtext",3,"click","keydown","focus","ngClass","disabled","autofocus"],[3,"click","ngClass"],[1,"p-colorpicker-content"],[1,"p-colorpicker-color-selector",3,"touchstart","touchmove","touchend","mousedown"],[1,"p-colorpicker-color"],[1,"p-colorpicker-color-handle"],[1,"p-colorpicker-hue",3,"mousedown","touchstart","touchmove","touchend"],[1,"p-colorpicker-hue-handle"]],template:function(i,r){i&1&&(o(0,"div",6,0),p(2,Vi,2,11,"input",7)(3,Pi,11,18,"div",8),n()),i&2&&(W(r.styleClass),m("ngStyle",r.style)("ngClass",Ee(8,Fi,!r.inline,r.colorDragging||r.hueDragging)),E("data-pc-name","colorpicker")("data-pc-section","root"),s(2),m("ngIf",!r.inline),s(),m("ngIf",r.inline||r.overlayVisible))},dependencies:[M,D,te,Ve],styles:[`@layer primeng{.p-colorpicker{display:inline-block}.p-colorpicker-dragging{cursor:pointer}.p-colorpicker-overlay{position:relative}.p-colorpicker-panel{position:relative;width:193px;height:166px}.p-colorpicker-overlay-panel{position:absolute;top:0;left:0}.p-colorpicker-preview{cursor:pointer}.p-colorpicker-panel .p-colorpicker-content{position:relative}.p-colorpicker-panel .p-colorpicker-color-selector{width:150px;height:150px;top:8px;left:8px;position:absolute}.p-colorpicker-panel .p-colorpicker-color{width:150px;height:150px}.p-colorpicker-panel .p-colorpicker-color-handle{position:absolute;top:0;left:150px;border-radius:100%;width:10px;height:10px;border-width:1px;border-style:solid;margin:-5px 0 0 -5px;cursor:pointer;opacity:.85}.p-colorpicker-panel .p-colorpicker-hue{width:17px;height:150px;top:8px;left:167px;position:absolute;opacity:.85}.p-colorpicker-panel .p-colorpicker-hue-handle{position:absolute;top:150px;left:0;width:21px;margin-left:-2px;margin-top:-5px;height:10px;border-width:2px;border-style:solid;opacity:.85;cursor:pointer}}
`],encapsulation:2,data:{animation:[_t("overlayAnimation",[je(":enter",[Be({opacity:0,transform:"scaleY(0.8)"}),Ne("{{showTransitionParams}}")]),je(":leave",[Ne("{{hideTransitionParams}}",Be({opacity:0}))])])]},changeDetection:0})}return t})(),Dt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=K({type:t});static \u0275inj=$({imports:[w,Pe]})}return t})();var Vt=t=>({submitted:t});function Ri(t,c){t&1&&(o(0,"small",21),l(1,"Name is requried!"),n())}function Ai(t,c){t&1&&(o(0,"small",21),l(1,"Minimum 3 characters!"),n())}function Ui(t,c){t&1&&(o(0,"small",21),l(1,"Icon is requried!"),n())}function Oi(t,c){t&1&&(o(0,"small",21),l(1,"Minimum 3 characters!"),n())}function Hi(t,c){if(t&1){let e=P();o(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),l(4),n(),o(5,"p"),l(6),n()(),o(7,"div",5)(8,"button",6),S("click",function(){_(e);let r=g();return C(r.onSubmitForm())}),d(9,"i"),o(10,"span"),l(11),n()(),o(12,"button",7),d(13,"i",8),o(14,"span"),l(15,"Cancel"),n()()(),o(16,"form",9)(17,"div",10)(18,"div",11)(19,"label",12),l(20,"Name"),n(),d(21,"input",13),p(22,Ri,2,0,"small",14)(23,Ai,2,0,"small",14),n(),o(24,"div",15)(25,"label",16),l(26,"Icon"),n(),d(27,"input",17),p(28,Ui,2,0,"small",14)(29,Oi,2,0,"small",14),n()(),o(30,"div",18)(31,"label",19),l(32,"Color"),n(),d(33,"p-colorPicker",20),n()()()()}if(t&2){let e=g();s(4),O("",e.categoryId?"Edit":"Add"," Category"),s(2),O("You can ",e.categoryId?"edit":"add"," categories here"),s(3),J("pi ",e.categoryId?"pi-cloud-upload":"pi-plus",""),s(2),q(e.categoryId?"Edit":"Add"),s(5),m("formGroup",e.form),s(5),m("ngClass",y(13,Vt,e.isSubmitted)),s(),m("ngIf",e.controlsForm.name.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.name.hasError("minlength")&&e.isSubmitted),s(4),m("ngClass",y(15,Vt,e.isSubmitted)),s(),m("ngIf",e.controlsForm.icon.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.icon.hasError("minlength")&&e.isSubmitted)}}function Ni(t,c){t&1&&(o(0,"div",22),d(1,"i",23),n())}var Ke=(()=>{let c=class c{constructor(i,r,a,u,v,b){this.formBuilder=i,this.categoriesService=r,this.messageService=a,this.router=u,this.route=v,this.changeDetectorRef=b,this.form=this.formBuilder.group({id:[""],name:["",[h.required,h.minLength(3)]],icon:["",[h.required,h.minLength(3)]],color:["#ffffff",[h.required]]}),this.categoryId="",this.isCmpInitialized=!1,this.isSubmitted=!1}ngOnInit(){this._checkParams()}onSubmitForm(){if(this.form.untouched)return this.categoryId?this.messageService.add({severity:"error",summary:"Error",detail:"Edit atleast 1 field!"}):this.messageService.add({severity:"error",summary:"Error",detail:"Fill the fields first!"});this.isSubmitted=!0,this.changeDetectorRef.markForCheck(),!this.form.invalid&&(this.categoryId?this._editCategory():this._addCategory())}_checkParams(){this.paramsSubscription=this.route.params.subscribe(i=>{i.categoryId?this.categoriesService.getCategoryById(i.categoryId).subscribe({next:r=>{this.categoryId=r.id,this.form.patchValue(r),this.isCmpInitialized=!0,this.changeDetectorRef.markForCheck()},error:r=>{console.error("Cannot get category",r)}}):(this.isCmpInitialized=!0,this.changeDetectorRef.markForCheck())})}_addCategory(){this.categoriesService.addCategory(this.form.value).subscribe({next:i=>R(this,null,function*(){this.messageService.add({severity:"success",summary:"Success",detail:`The category "${i.name}" is created successfully!`}),this.changeDetectorRef.markForCheck(),yield V(A(2e3)),this.router.navigateByUrl("/categories")}),error:i=>{this.messageService.add({severity:"error",summary:"Error",detail:"The category cannot be created!"}),console.error("The category cannot be created!",i)}})}_editCategory(){this.categoriesService.editCategory(this.form.value).subscribe({next:i=>R(this,null,function*(){this.messageService.add({severity:"success",summary:"Success",detail:`The category "${i.name}" is edited successfully!`}),this.changeDetectorRef.markForCheck(),yield V(A(2e3)),this.router.navigateByUrl("/categories")}),error:i=>{this.messageService.add({severity:"error",summary:"Error",detail:"The category cannot be edited!"}),console.error("Cannot edit category",i)}})}get controlsForm(){return this.form.controls}ngOnDestroy(){this.paramsSubscription?.unsubscribe()}};c.\u0275fac=function(r){return new(r||c)(f(de),f(Fe),f(pe),f(re),f(ie),f(Q))},c.\u0275cmp=I({type:c,selectors:[["admin-categories-form"]],standalone:!0,features:[j],decls:4,vars:2,consts:[["loader",""],["class","categories-form-modal",4,"ngIf","ngIfElse"],[1,"categories-form-modal"],[1,"categories-form-container"],[1,"categories-form-heading"],[1,"btns-container"],[1,"btn-create",3,"click"],["routerLink","/categories",1,"btn-cancel"],[1,"pi","pi-arrow-circle-left"],[3,"formGroup"],[1,"inputs-container"],[1,"name-input"],["for","name"],["formControlName","name","type","text","name","name","id","name",3,"ngClass"],["class","p-error",4,"ngIf"],[1,"icon-input"],["for","icon"],["formControlName","icon","type","text","name","icon","id","icon",3,"ngClass"],[1,"color-input"],["for","color"],["formControlName","color"],[1,"p-error"],[1,"loader"],[1,"pi","pi-spin","pi-spinner"]],template:function(r,a){if(r&1&&(p(0,Hi,34,17,"div",1),d(1,"p-toast"),p(2,Ni,2,0,"ng-template",null,0,z)),r&2){let u=B(3);m("ngIf",a.isCmpInitialized)("ngIfElse",u)}},dependencies:[w,M,D,G,Me,le,oe,ae,se,ue,ce,me,fe,he,Dt,$e],changeDetection:0});let t=c;return t})();var X=t=>({submitted:t});function Bi(t,c){t&1&&(o(0,"small",41),l(1,"Name is requried!"),n())}function ji(t,c){t&1&&(o(0,"small",41),l(1,"Minimum 3 characters!"),n())}function zi(t,c){t&1&&(o(0,"small",41),l(1,"Email is requried!"),n())}function Qi(t,c){t&1&&(o(0,"small",41),l(1,'Must contain email with "@"'),n())}function Gi(t,c){t&1&&(o(0,"small",41),l(1,"Password is requried!"),n())}function Xi(t,c){t&1&&(o(0,"small",41),l(1,"Minimum 5 characters!"),n())}function Zi(t,c){t&1&&(o(0,"small",41),l(1,"Phone is requried!"),n())}function Yi(t,c){t&1&&(o(0,"small",41),l(1,"Minimum 8 characters!"),n())}function $i(t,c){t&1&&(o(0,"small",41),l(1,"Street is requried!"),n())}function Ki(t,c){t&1&&(o(0,"small",41),l(1,"Minimum 8 characters!"),n())}function Wi(t,c){t&1&&(o(0,"small",41),l(1,"Apartment is requried!"),n())}function Ji(t,c){t&1&&(o(0,"small",41),l(1,"Zip is requried!"),n())}function er(t,c){t&1&&(o(0,"small",41),l(1,"Minimum 5 characters!"),n())}function tr(t,c){t&1&&(o(0,"small",41),l(1,"City is requried!"),n())}function ir(t,c){t&1&&(o(0,"small",41),l(1,"Minimum 3 characters!"),n())}function rr(t,c){t&1&&(o(0,"small",41),l(1,"Country is requried!"),n())}function nr(t,c){t&1&&(o(0,"small",41),l(1,"Minimum 3 characters!"),n())}function or(t,c){if(t&1){let e=P();o(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),l(4),n(),o(5,"p"),l(6),n()(),o(7,"div",5)(8,"button",6),S("click",function(){_(e);let r=g();return C(r.onSubmitForm())}),d(9,"i"),o(10,"span"),l(11),n()(),o(12,"button",7),d(13,"i",8),o(14,"span"),l(15,"Cancel"),n()()(),o(16,"form",9)(17,"div",10)(18,"div",11)(19,"label",12),l(20,"Name"),n(),d(21,"input",13),p(22,Bi,2,0,"small",14)(23,ji,2,0,"small",14),n(),o(24,"div",15)(25,"label",16),l(26,"Email"),n(),d(27,"input",17),p(28,zi,2,0,"small",14)(29,Qi,2,0,"small",14),n(),o(30,"div",18)(31,"label",19),l(32,"Password"),n(),d(33,"input",20),p(34,Gi,2,0,"small",14)(35,Xi,2,0,"small",14),n(),o(36,"div",21)(37,"label",22),l(38,"Phone"),n(),d(39,"input",23),p(40,Zi,2,0,"small",14)(41,Yi,2,0,"small",14),n(),o(42,"div",24)(43,"label",25),l(44,"Admin"),n(),d(45,"p-inputSwitch",26),n(),o(46,"div",27)(47,"label",22),l(48,"Street"),n(),d(49,"input",28),p(50,$i,2,0,"small",14)(51,Ki,2,0,"small",14),n(),o(52,"div",29)(53,"label",30),l(54,"Apartment"),n(),d(55,"input",31),p(56,Wi,2,0,"small",14),n(),o(57,"div",32)(58,"label",33),l(59,"Zip"),n(),d(60,"input",34),p(61,Ji,2,0,"small",14)(62,er,2,0,"small",14),n(),o(63,"div",35)(64,"label",36),l(65,"City"),n(),d(66,"input",37),p(67,tr,2,0,"small",14)(68,ir,2,0,"small",14),n(),o(69,"div",38)(70,"label",39),l(71,"Country"),n(),d(72,"p-dropdown",40),p(73,rr,2,0,"small",14)(74,nr,2,0,"small",14),n()()()()()}if(t&2){let e=g();s(4),O("",e.userId?"Edit":"Add"," User"),s(2),O("You can ",e.userId?"edit":"add"," users here"),s(3),J("pi ",e.userId?"pi-cloud-upload":"pi-plus",""),s(2),q(e.userId?"Edit":"Add"),s(5),m("formGroup",e.form),s(5),m("ngClass",y(34,X,e.isSubmitted)),s(),m("ngIf",e.controlsForm.name.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.name.hasError("minlength")&&e.isSubmitted),s(4),m("ngClass",y(36,X,e.isSubmitted)),s(),m("ngIf",e.controlsForm.email.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.email.hasError("email")&&e.isSubmitted),s(4),m("ngClass",y(38,X,e.isSubmitted)),s(),m("ngIf",e.controlsForm.password.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.password.hasError("minlength")&&e.isSubmitted),s(4),m("ngClass",y(40,X,e.isSubmitted)),s(),m("ngIf",e.controlsForm.phone.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.phone.hasError("minlength")&&e.isSubmitted),s(8),m("ngClass",y(42,X,e.isSubmitted)),s(),m("ngIf",e.controlsForm.street.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.street.hasError("minlength")&&e.isSubmitted),s(4),m("ngClass",y(44,X,e.isSubmitted)),s(),m("ngIf",e.controlsForm.apartment.hasError("required")&&e.isSubmitted),s(4),m("ngClass",y(46,X,e.isSubmitted)),s(),m("ngIf",e.controlsForm.zip.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.zip.hasError("minlength")&&e.isSubmitted),s(4),m("ngClass",y(48,X,e.isSubmitted)),s(),m("ngIf",e.controlsForm.city.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.city.hasError("minlength")&&e.isSubmitted),s(4),m("options",e.countries)("filter",!0),s(),m("ngIf",e.controlsForm.country.hasError("required")&&e.isSubmitted),s(),m("ngIf",e.controlsForm.country.hasError("minlength")&&e.isSubmitted)}}function ar(t,c){t&1&&(o(0,"div",42),d(1,"i",43),n())}var We=(()=>{let c=class c{constructor(i,r,a,u,v){this.formBuilder=i,this.usersService=r,this.messageService=a,this.router=u,this.route=v,this.form=this.formBuilder.group({id:[""],name:["",[h.required,h.minLength(3)]],email:["",[h.required,h.email]],password:["",[h.required,h.minLength(5)]],phone:["",[h.required,h.minLength(8)]],isAdmin:[!1],street:["",[h.required,h.minLength(8)]],apartment:["",[h.required]],zip:["",[h.required,h.minLength(5)]],city:["",[h.required,h.minLength(3)]],country:["",[h.required]]}),this.userId="",this.countries=[],this.isCmpInizialized=!1,this.isSubmitted=!1}ngOnInit(){this._checkParams(),this._getCountries()}onSubmitForm(){if(this.form.untouched)return this.userId?this.messageService.add({severity:"error",summary:"Error",detail:"Edit atleast 1 field!"}):this.messageService.add({severity:"error",summary:"Error",detail:"Fill the fields first!"});this.isSubmitted=!0,!this.form.invalid&&(this.userId?this._editUser():this._addUser())}_checkParams(){this.paramsSubscription=this.route.params.subscribe(i=>{i.userId?this.usersService.getUserById(i.userId).subscribe({next:r=>{this.userId=r.id,this.form.patchValue(r),this.form.controls.password.setValidators([]),this.isCmpInizialized=!0},error:r=>{console.error("Cannot get user",r)}}):this.isCmpInizialized=!0})}_getCountries(){let i=this.usersService.getCountries();this.countries=i}_addUser(){this.usersService.addUser(this.form.value).subscribe({next:i=>R(this,null,function*(){this.messageService.add({severity:"success",summary:"Success",detail:`The user "${i.name}" is created successfully!`}),yield V(A(2e3)),this.router.navigateByUrl("/users")}),error:i=>{this.messageService.add({severity:"error",summary:"Error",detail:"The user cannot be created!"}),console.error("The user cannot be created!",i)}})}_editUser(){this.usersService.editUser(this.form.value).subscribe({next:i=>R(this,null,function*(){this.messageService.add({severity:"success",summary:"Success",detail:`The user "${i.name}" is edited successfully!`}),yield V(A(2e3)),this.router.navigateByUrl("/users")}),error:i=>{this.messageService.add({severity:"error",summary:"Error",detail:"The user cannot be edited!"}),console.error("Cannot edit user",i)}})}get controlsForm(){return this.form.controls}ngOnDestroy(){this.paramsSubscription?.unsubscribe()}};c.\u0275fac=function(r){return new(r||c)(f(de),f(Te),f(pe),f(re),f(ie))},c.\u0275cmp=I({type:c,selectors:[["admin-users-form"]],standalone:!0,features:[j],decls:4,vars:2,consts:[["loader",""],["class","users-form-modal",4,"ngIf","ngIfElse"],[1,"users-form-modal"],[1,"users-form-container"],[1,"users-form-heading"],[1,"btns-container"],[1,"btn-create",3,"click"],["routerLink","/users",1,"btn-cancel"],[1,"pi","pi-arrow-circle-left"],[3,"formGroup"],[1,"inputs-container"],[1,"name-input"],["for","name"],["formControlName","name","type","text","name","name","id","name",3,"ngClass"],["class","p-error",4,"ngIf"],[1,"email-input"],["for","email"],["formControlName","email","type","email","name","email","id","email",3,"ngClass"],[1,"password-input"],["for","password"],["formControlName","password","type","password","name","password","id","password",3,"ngClass"],[1,"phone-input"],["for","phone"],["formControlName","phone","type","tel","name","phone","id","phone",3,"ngClass"],[1,"admin-input"],["for","admin"],["formControlName","isAdmin","inputId","admin"],[1,"street-input"],["formControlName","street","type","text","name","street","id","street",3,"ngClass"],[1,"apartment-input"],["for","apartment"],["formControlName","apartment","type","text","name","apartment","id","apartment",3,"ngClass"],[1,"zip-input"],["for","zip"],["formControlName","zip","type","text","name","zip","id","zip",3,"ngClass"],[1,"city-input"],["for","city"],["formControlName","city","type","text","name","city","id","city",3,"ngClass"],[1,"country-input"],["for","country"],["formControlName","country","optionLabel","name","optionValue","id","filterBy","name","placeholder","Select a country",3,"options","filter"],[1,"p-error"],[1,"loader"],[1,"pi","pi-spin","pi-spinner"]],template:function(r,a){if(r&1&&(p(0,or,75,50,"div",1),d(1,"p-toast"),p(2,ar,2,0,"ng-template",null,0,z)),r&2){let u=B(3);m("ngIf",a.isCmpInizialized&&a.countries.length)("ngIfElse",u)}},dependencies:[w,M,D,G,we,fe,he,ue,le,oe,ae,se,ce,me,Re,ye,Le,qe]});let t=c;return t})();var Nn=[{path:"",component:It,title:"Dashboard | Admin Panel",canActivate:[F],children:[{path:"order-statistics",loadComponent:()=>import("./chunk-NH46MMZJ.js").then(t=>t.OrderStatisticsComponent),title:"Orders Statistics | Admin Panel"},{path:"user-statistics",loadComponent:()=>import("./chunk-FXRRXJN4.js").then(t=>t.UserStatisticsComponent),title:"Users Statistics | Admin Panel"},{path:"product-statistics",loadComponent:()=>import("./chunk-BRGEWL5O.js").then(t=>t.ProductStatisticsComponent),title:"Products Statistics | Admin Panel"},{path:"total-sales-statistics",loadComponent:()=>import("./chunk-DHU56SBH.js").then(t=>t.TotalSalesStatisticsComponent),title:"Total Sales Statistics | Admin Panel"}]},{path:"products",loadComponent:()=>import("./chunk-YBTDX4BW.js").then(t=>t.ProductListComponent),title:"Products | Admin Panel",canActivate:[F],children:[{path:"form",component:Ye,title:"Add Product | Admin Panel",canActivate:[F]},{path:"form/:productId",component:Ye,title:"Edit Product | Admin Panel",canActivate:[F]}]},{path:"categories",loadComponent:()=>import("./chunk-ZD5XTJOU.js").then(t=>t.CategoriesComponent),title:"Categories | Admin Panel",canActivate:[F],children:[{path:"form",component:Ke,title:"Add Category | Admin Panel",canActivate:[F]},{path:"form/:categoryId",component:Ke,title:"Edit Category | Admin Panel",canActivate:[F]}]},{path:"orders",loadComponent:()=>import("./chunk-YOTT3AVM.js").then(t=>t.OrdersListComponent),title:"Orders | Admin Panel",canActivate:[F]},{path:"orders/:orderId",loadComponent:()=>import("./chunk-2T6XLB57.js").then(t=>t.OrdersDetailsComponent),title:"Order Details | Admin Panel",canActivate:[F]},{path:"users",loadComponent:()=>import("./chunk-BQUWSKTK.js").then(t=>t.UsersListComponent),title:"Users | Admin Panel",canActivate:[F],children:[{path:"form",component:We,title:"Add User | Admin Panel",canActivate:[F]},{path:"form/:userId",component:We,title:"Edit User | Admin Panel",canActivate:[F]}]}];export{Nn as adminRoutes};
