import{a as z}from"./chunk-LYDSVJGF.js";import{a as H,b as J,c as K,d as Q,e as W,f as X,g as Y,h as Z,i as ee}from"./chunk-TVGPFMWC.js";import"./chunk-MT64IMAR.js";import"./chunk-TS3NKEIW.js";import{Aa as I,Ca as o,Da as r,Ea as m,Ec as q,Fa as T,Ga as w,Ia as b,Ib as N,J as y,Ja as x,Ka as s,Kb as R,Lb as B,Mb as L,O as u,Oa as E,Oc as P,P as C,Pc as G,Ua as v,Va as p,Wa as S,Xa as D,_a as k,ab as $,ia as l,ja as f,m as h,mb as F,sb as M,ta as _,tb as O,ub as V,va as c,vc as A,yb as j,zc as U}from"./chunk-CX4LBOHC.js";import"./chunk-CWTPBX7D.js";function te(e,n){if(e&1&&m(0,"p-sortIcon",15),e&2){let t=s().$implicit;c("field",t.field)}}function ie(e,n){if(e&1&&(o(0,"th",13),_(1,te,1,1,"p-sortIcon",14),p(2),r()),e&2){let t=n.$implicit,i=n.index;c("pSortableColumn",t.field)("pSortableColumnDisabled",i!==0),l(),c("ngIf",t.field==="name"),l(),D(" ",t.header," ")}}function ne(e,n){if(e&1&&(o(0,"tr"),_(1,ie,3,4,"th",12),o(2,"th"),p(3,"Actions"),r()()),e&2){let t=n.$implicit;l(),c("ngForOf",t)}}function oe(e,n){if(e&1&&m(0,"i",22),e&2){let t=s().$implicit,i=s().$implicit;I("pi pi-",i[t.field],"")}}var re=e=>({backgroundColor:e,width:"2em",height:"2em",borderRadius:"50%"});function ae(e,n){if(e&1&&m(0,"div",23),e&2){let t=s().$implicit,i=s().$implicit;c("ngStyle",$(1,re,i[t.field]))}}function le(e,n){if(e&1&&(T(0),p(1),w()),e&2){let t=s().$implicit,i=s().$implicit;l(),S(i[t.field])}}function ce(e,n){if(e&1&&(o(0,"td"),_(1,oe,1,3,"i",19)(2,ae,1,3,"div",20)(3,le,2,1,"ng-container",21),r()),e&2){let t=n.$implicit;l(),c("ngIf",t.field==="icon"),l(),c("ngIf",t.field==="color"),l(),c("ngIf",t.field==="name")}}function se(e,n){if(e&1){let t=b();o(0,"tr"),_(1,ce,4,3,"td",16),o(2,"td")(3,"p-button",17),x("click",function(){let g=u(t).$implicit,d=s(2);return C(d.onDeleteCategory(g._id))}),r(),m(4,"p-button",18),r()()}if(e&2){let t=n.$implicit,i=n.columns;l(),c("ngForOf",i),l(3),E("routerLink","/categories/form/",t._id,"")}}function me(e,n){if(e&1&&(o(0,"section",4)(1,"div",5)(2,"h1"),p(3,"Categories"),r(),o(4,"p"),p(5,"List of all categories"),r()(),o(6,"div",6)(7,"button",7),m(8,"i",8),o(9,"span"),p(10,"New"),r()()(),o(11,"p-table",9),_(12,ne,4,1,"ng-template",10)(13,se,5,2,"ng-template",11),r()()),e&2){let t=s();l(11),c("columns",t.cols)("value",t.categories)}}function pe(e,n){e&1&&(o(0,"div",24)(1,"p"),m(2,"i",25),r()())}function _e(e,n){if(e&1){let t=b();o(0,"div",26)(1,"div",27),m(2,"i",28),r(),o(3,"span",29),p(4),r(),o(5,"p",30),p(6),r(),o(7,"div",31)(8,"button",32),x("click",function(){u(t),s();let a=v(5);return C(a.accept())}),r(),o(9,"button",33),x("click",function(){u(t),s();let a=v(5);return C(a.reject())}),r()()()}if(e&2){let t=n.$implicit;l(4),S(t.header),l(2),S(t.message)}}var $e=(()=>{let n=class n{constructor(i,a,g,d){this.categoriesService=i,this.router=a,this.messageService=g,this.confirmationService=d,this.cols=[{field:"name",header:"Name"},{field:"icon",header:"Icon"},{field:"color",header:"Color"}]}ngOnInit(){this.getCategories(),this.listenUrlChanges()}getCategories(){this.categoriesService.getCategories().subscribe({next:i=>{this.categories=i},error:i=>{console.error("Cannot get categories",i)}})}onDeleteCategory(i){this.confirmationService.confirm({header:"Delete Category",message:"Are you sure you want to delete this Category?",accept:()=>{this.categoriesService.deleteCategory(i).subscribe({next:a=>{this.categories=this.categories.filter(g=>g.id!==a.id),this.messageService.add({severity:"success",summary:"Success",detail:`The category "${a.name}" is deleted successfully!`})},error:a=>{console.error("Cannot delete category",a)}})},reject:()=>{}})}listenUrlChanges(){this.urlChangesSubscription=this.router.events.pipe(h(i=>i instanceof N)).subscribe({next:()=>{this.getCategories()},error:i=>{console.error("Cannot get url changes!",i)}})}ngOnDestroy(){this.urlChangesSubscription?.unsubscribe()}};n.\u0275fac=function(a){return new(a||n)(f(z),f(B),f(U),f(A))},n.\u0275cmp=y({type:n,selectors:[["admin-categories"]],standalone:!0,features:[k],decls:8,vars:2,consts:[["class","categories-page",4,"ngIf","ngIfElse"],["loader",""],["cd",""],["pTemplate","headless"],[1,"categories-page"],[1,"name-page"],[1,"btn-container"],["routerLink","/categories/form",1,"btn-create-edit-category"],[1,"pi","pi-plus"],[1,"p-table",3,"columns","value"],["pTemplate","header"],["pTemplate","body"],[3,"pSortableColumn","pSortableColumnDisabled",4,"ngFor","ngForOf"],[3,"pSortableColumn","pSortableColumnDisabled"],[3,"field",4,"ngIf"],[3,"field"],[4,"ngFor","ngForOf"],["styleClass","p-button-trash","icon","pi pi-trash",3,"click"],["styleClass","p-button-pencil","icon","pi pi-pencil",3,"routerLink"],["style","font-size: 1.5em",3,"class",4,"ngIf"],["class","color-preview",3,"ngStyle",4,"ngIf"],[4,"ngIf"],[2,"font-size","1.5em"],[1,"color-preview",3,"ngStyle"],[1,"loader-container"],[1,"pi","pi-spin","pi-spinner"],[1,"confirm-modal","flex","flex-column","align-items-center","p-5","border-round"],[1,"icon","border-circle","inline-flex","justify-content-center","align-items-center","h-6rem","w-6rem","-mt-8"],[1,"pi","pi-question","text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","align-items-center","gap-2","mt-4"],["pButton","","label","Save",1,"w-8rem",3,"click"],["pButton","","label","Cancel",1,"p-button-outlined","w-8rem",3,"click"]],template:function(a,g){if(a&1&&(_(0,me,14,2,"section",0)(1,pe,3,0,"ng-template",null,1,F),m(3,"p-toast"),o(4,"p-confirmDialog",null,2),_(6,_e,10,2,"ng-template",3),r(),m(7,"router-outlet")),a&2){let d=v(2);c("ngIf",g.categories)("ngIfElse",d)}},dependencies:[j,M,O,V,ee,X,q,Y,Z,L,R,K,H,J,G,P,W,Q]});let e=n;return e})();export{$e as CategoriesComponent};
