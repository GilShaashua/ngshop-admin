import{a as z}from"./chunk-DHCCZPFT.js";import{a as re,b as oe}from"./chunk-LILRBLMK.js";import{a as Q,b as W,c as X,d as Y,e as Z,f as ee,g as te,h as ie,i as ne}from"./chunk-LZ42FOSW.js";import"./chunk-GZE5FUQ2.js";import"./chunk-RFW3ZCTE.js";import{$a as M,Ca as l,Da as a,Ea as _,Ec as H,Fa as u,Ga as g,Ia as b,J as w,Ja as S,Ka as s,Mb as q,O as x,Oa as L,Oc as J,P as C,Pc as K,Ua as h,Va as m,Wa as f,Xa as $,_a as k,h as E,ia as o,ib as O,ja as v,jb as F,kb as V,mb as B,sb as P,ta as p,tb as j,va as c,vc as U,wb as A,xb as N,ya as D,yb as R,zc as G}from"./chunk-ERFA3NGG.js";import{a as T,b as I}from"./chunk-CWTPBX7D.js";function le(e,n){if(e&1&&(l(0,"th",11),_(1,"p-sortIcon",12),m(2),a()),e&2){let t=n.$implicit;c("pSortableColumn",t.field),o(),c("field",t.field),o(),$(" ",t.header," ")}}function ae(e,n){if(e&1&&(l(0,"tr"),p(1,le,3,3,"th",10),l(2,"th"),m(3,"Actions"),a()()),e&2){let t=n.$implicit;o(),c("ngForOf",t)}}function se(e,n){if(e&1&&(u(0),m(1),g()),e&2){let t=s().$implicit,i=s().$implicit;o(),f(i[t.field])}}function ce(e,n){if(e&1&&(u(0),m(1),O(2,"currency"),g()),e&2){let t=s().$implicit,i=s().$implicit;o(),f(F(2,1,i[t.field]))}}function me(e,n){if(e&1&&(u(0),m(1),O(2,"date"),g()),e&2){let t=s().$implicit,i=s().$implicit;o(),f(V(2,1,i[t.field],"dd/MM/yyyy"))}}var de=()=>({fontSize:"14px",paddingInline:"15px",height:"30px"});function pe(e,n){if(e&1&&(u(0),_(1,"p-tag",17),g()),e&2){let t=s().$implicit,i=s().$implicit,r=s(2);o(),D(M(5,de)),c("rounded",!0)("value",r.orderStatus[i[t.field]].label)("severity",r.orderStatus[i[t.field]].color)}}function _e(e,n){if(e&1&&(l(0,"td"),p(1,se,2,1,"ng-container",16)(2,ce,3,3,"ng-container",16)(3,me,3,4,"ng-container",16)(4,pe,2,6,"ng-container",16),a()),e&2){let t=n.$implicit;o(),c("ngIf",t.field==="user"),o(),c("ngIf",t.field==="totalPrice"),o(),c("ngIf",t.field==="dateOrdered"),o(),c("ngIf",t.field==="status")}}function fe(e,n){if(e&1){let t=b();l(0,"tr"),p(1,_e,5,4,"td",13),l(2,"td")(3,"p-button",14),S("click",function(){let d=x(t).$implicit,y=s(2);return C(y.onDeleteOrder(d.id))}),a(),_(4,"p-button",15),a()()}if(e&2){let t=n.$implicit,i=n.columns;o(),c("ngForOf",i),o(3),L("routerLink","/orders/",t.id,"")}}function ue(e,n){e&1&&(l(0,"div",18)(1,"p"),m(2,"There are no orders yet!"),a()())}function ge(e,n){if(e&1&&(l(0,"section",4)(1,"div",5)(2,"h1"),m(3,"Orders"),a(),l(4,"p"),m(5,"List of all orders"),a()(),l(6,"p-table",6),p(7,ae,4,1,"ng-template",7)(8,fe,5,2,"ng-template",8),a(),p(9,ue,3,0,"div",9),a()),e&2){let t=s();o(6),c("columns",t.cols)("value",t.orders),o(3),c("ngIf",!t.orders.length)}}function xe(e,n){e&1&&(l(0,"div",19)(1,"p"),_(2,"i",20),a()())}function Ce(e,n){if(e&1){let t=b();l(0,"div",21)(1,"div",22),_(2,"i",23),a(),l(3,"span",24),m(4),a(),l(5,"p",25),m(6),a(),l(7,"div",26)(8,"button",27),S("click",function(){x(t),s();let r=h(5);return C(r.accept())}),a(),l(9,"button",28),S("click",function(){x(t),s();let r=h(5);return C(r.reject())}),a()()()}if(e&2){let t=n.$implicit;o(4),f(t.header),o(2),f(t.message)}}var Be=(()=>{let n=class n{constructor(i,r,d){this.messageService=i,this.confirmationService=r,this.ordersService=d,this.cols=[{field:"user",header:"User"},{field:"totalPrice",header:"Total price"},{field:"dateOrdered",header:"Date ordered"},{field:"status",header:"Status"}],this.orderStatus={0:{label:"Pending",color:"primary"},1:{label:"Processed",color:"warning"},2:{label:"Shipped",color:"info"},3:{label:"Delivered",color:"success"},4:{label:"Failed",color:"danger"}}}ngOnInit(){this.getOrders()}getOrders(){this.ordersService.getOrders().pipe(E(i=>i.map(d=>I(T({},d),{user:d.user.name})))).subscribe({next:i=>{this.orders=i},error:i=>{console.error("Cannot get orders",i)}})}onDeleteOrder(i){this.confirmationService.confirm({header:"Delete Order",message:"Are you sure you want to delete this Order?",accept:()=>{this.ordersService.deleteOrder(i).subscribe({next:r=>{this.orders=this.orders.filter(d=>d.id!==r.id),this.messageService.add({severity:"success",summary:"Success",detail:`The order "${r.id}" is deleted successfully!`})},error:r=>{console.error("Cannot delete order",r)}})},reject:()=>{}})}ngOnDestroy(){}};n.\u0275fac=function(r){return new(r||n)(v(G),v(U),v(z))},n.\u0275cmp=w({type:n,selectors:[["admin-orders-list"]],standalone:!0,features:[k],decls:7,vars:2,consts:[["class","orders-page",4,"ngIf","ngIfElse"],["loader",""],["cd",""],["pTemplate","headless"],[1,"orders-page"],[1,"name-page"],[1,"p-table",3,"columns","value"],["pTemplate","header"],["pTemplate","body"],["class","no-orders",4,"ngIf"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[4,"ngFor","ngForOf"],["styleClass","p-button-trash","icon","pi pi-trash",3,"click"],["styleClass","p-button-details","icon","pi pi-eye",3,"routerLink"],[4,"ngIf"],[3,"rounded","value","severity"],[1,"no-orders"],[1,"loader-container"],[1,"pi","pi-spin","pi-spinner"],[1,"confirm-modal","flex","flex-column","align-items-center","p-5","border-round"],[1,"icon","border-circle","inline-flex","justify-content-center","align-items-center","h-6rem","w-6rem","-mt-8"],[1,"pi","pi-question","text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","align-items-center","gap-2","mt-4"],["pButton","","label","Save",1,"w-8rem",3,"click"],["pButton","","label","Cancel",1,"p-button-outlined","w-8rem",3,"click"]],template:function(r,d){if(r&1&&(p(0,ge,10,3,"section",0)(1,xe,3,0,"ng-template",null,1,B),_(3,"p-toast"),l(4,"p-confirmDialog",null,2),p(6,Ce,10,2,"ng-template",3),a()),r&2){let y=h(2);c("ngIf",d.orders)("ngIfElse",y)}},dependencies:[R,P,j,N,A,X,Q,W,H,Z,Y,q,ne,ee,te,ie,K,J,oe,re]});let e=n;return e})();export{Be as OrdersListComponent};
