import{o as g}from"./chunk-QZRC2FX4.js";import{I as h,L as n,Nb as s,Ob as u,bc as d,c as p,t as c}from"./chunk-CW4CGSOG.js";var P=(()=>{let r=class r{constructor(t,e){this.http=t,this.authService=e,this._filterBy$=new p({categories:[],name:""}),this.filterBy$=this._filterBy$.asObservable(),this._products$=new p({products:[],pageCount:0}),this.products$=this._products$.asObservable(),this.apiUrl=d.API_URL}getProducts({currPage:t,pageSize:e}={}){let i=new s;this._filterBy$.value.categories.length&&(i=i.append("categories",this._filterBy$.value.categories.join(","))),this._filterBy$.value.name&&(i=i.append("products",this._filterBy$.value.name)),t&&e&&(i=i.append("currPage",t),i=i.append("pageSize",e)),this.http.get(`${this.apiUrl}products`,{params:i}).pipe(c(1)).subscribe({next:o=>{this._setProducts(o)},error:o=>{console.error("err",o)}})}_setProducts(t){this._products$.next(t)}getProductById(t){return this.http.get(`${this.apiUrl}products/${t}`)}addProduct(t){let e=new s().append("isLoginFast",this.authService.getIsLoginFast());return this.http.post(`${this.apiUrl}products`,t,{params:e})}editProduct(t){let e=new s().append("isLoginFast",this.authService.getIsLoginFast());return this.http.put(`${this.apiUrl}products/${t.get("id")}`,t,{params:e})}editProductGallery(t,e){let i=new s().append("isLoginFast",this.authService.getIsLoginFast());return this.http.put(`${this.apiUrl}products/gallery-images/${e}`,t,{params:i})}deleteProduct(t){let e=new s().append("isLoginFast",this.authService.getIsLoginFast());return this.http.delete(`${this.apiUrl}products/${t}`,{params:e})}getProductsCount(){let t=new s().append("isLoginFast",this.authService.getIsLoginFast());return this.http.get(`${this.apiUrl}products/get/count`,{params:t})}getFeaturedProducts(t){return this.http.get(`${this.apiUrl}products/get/featured/${t}`)}setFilterBy(t){this._filterBy$.next(t)}getProductStatistics(){let t=new s().append("isLoginFast",this.authService.getIsLoginFast());return this.http.get(`${this.apiUrl}products/get/statistics`,{params:t})}};r.\u0275fac=function(e){return new(e||r)(n(u),n(g))},r.\u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})();export{P as a};
