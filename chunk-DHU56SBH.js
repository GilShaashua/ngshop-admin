import{a as N}from"./chunk-ZHE4O2IY.js";import{c as J}from"./chunk-GRDIOF3G.js";import"./chunk-MAVNWS4Y.js";import{e as V,fa as Y,ga as j,h as k,n as F}from"./chunk-COXHLCCB.js";import"./chunk-OVKFVBDW.js";import{Fb as B,Ha as s,Ia as a,Ja as d,Kb as E,Na as y,Oa as _,P as h,Pa as c,X as m,Y as g,Ya as C,Yb as I,Za as v,ac as D,bb as w,cb as x,db as M,fb as O,i as u,ja as f,ka as S,tb as T,va as b,xa as l}from"./chunk-5BBGCJT5.js";import"./chunk-6DTZ7UCQ.js";function L(i,r){if(i&1){let o=y();s(0,"section",2)(1,"div",3)(2,"div",4)(3,"h2"),v(4,"Total Sales Statistics"),a(),s(5,"button",5),d(6,"i",6),a()(),s(7,"div",7)(8,"p-dropdown",8),M("ngModelChange",function(t){m(o);let n=c();return x(n.filterBy.dateOrdered,t)||(n.filterBy.dateOrdered=t),g(t)}),_("onChange",function(){m(o);let t=c();return g(t.getTotalSalesStatistics())}),a()()(),s(9,"div",9),d(10,"canvas",10),a()()}if(i&2){let o=c();f(8),l("options",o.years),w("ngModel",o.filterBy.dateOrdered),f(2),l("data",o.chart.data)("type",o.chart.type)("options",o.chart.options)}}function R(i,r){i&1&&(s(0,"section",11)(1,"div",12)(2,"p"),d(3,"i",13),a()()())}var $=(()=>{let r=class r{constructor(e){this.ordersService=e,this.filterBy={dateOrdered:""},this.monthsMap={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}ngOnInit(){this._getOrdersYears()}_getOrdersYears(){this.ordersService.getOrdersYears().subscribe(({years:e})=>{this.filterBy.dateOrdered=e[0],this.years=e,this.getTotalSalesStatistics()})}getTotalSalesStatistics(){this.ordersService.getTotalSalesStatistics(this.filterBy).pipe(u(e=>{let t={};for(let n in e){let p=this.monthsMap[n];t[p]=e[n]}return t})).subscribe({next:e=>{this.chart={type:"doughnut",data:{labels:Object.keys(e),datasets:[{label:"Total Sales",data:Object.values(e),backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(255, 159, 64)","rgb(25, 25, 112)","rgb(0, 128, 128)","rgb(255, 69, 0)","rgb(255, 215, 0)","rgb(0, 128, 0)","rgb(128, 0, 128)"]}]},options:{plugins:{legend:{labels:{color:"white",font:{size:16}}}}}}}})}};r.\u0275fac=function(t){return new(t||r)(S(N))},r.\u0275cmp=h({type:r,selectors:[["admin-total-sales-statistics"]],standalone:!0,features:[O],decls:3,vars:2,consts:[["loader",""],["class","total-sales-statistics",4,"ngIf","ngIfElse"],[1,"total-sales-statistics"],[1,"header"],[1,"inner-container"],["routerLink","/",1,"btn-close"],[1,"pi","pi-times"],[1,"dropdoown"],["placeholder","Select a Year",3,"ngModelChange","onChange","options","ngModel"],[1,"body"],["baseChart","",3,"data","type","options"],[1,"loader-container-statistics"],[1,"loader"],[1,"pi","pi-spin","pi-spinner"]],template:function(t,n){if(t&1&&b(0,L,11,5,"section",1)(1,R,4,0,"ng-template",null,0,T),t&2){let p=C(2);l("ngIf",n.chart)("ngIfElse",p)}},dependencies:[E,B,J,D,I,j,Y,F,V,k]});let i=r;return i})();export{$ as TotalSalesStatisticsComponent};
