import{a as J}from"./chunk-D5TDNWAN.js";import{a as Z,b as ee,c as te,d as ie,e as ne,f as oe,g as re,h as ce,i as ae}from"./chunk-LZ42FOSW.js";import"./chunk-GZE5FUQ2.js";import"./chunk-RFW3ZCTE.js";import{Ca as o,Da as n,Ea as m,Ec as W,Fa as F,Ga as B,Ia as b,Ib as A,J as $,Ja as S,Ka as p,Kb as q,Lb as G,Mb as H,Na as M,O as x,Oa as P,Oc as X,P as C,Pc as Y,Ua as h,Va as l,Wa as g,Xa as _,_a as V,aa as I,h as L,ia as c,ib as y,ja as v,jb as E,kb as w,m as D,mb as O,sb as j,ta as u,tb as R,va as s,vc as K,wb as N,xb as U,yb as z,zc as Q}from"./chunk-ERFA3NGG.js";import{a as T,b as k}from"./chunk-CWTPBX7D.js";function le(t,r){if(t&1&&m(0,"p-sortIcon",18),t&2){let e=p().$implicit;s("field",e.field)}}function pe(t,r){if(t&1&&(o(0,"th",16),u(1,le,1,1,"p-sortIcon",17),l(2),n()),t&2){let e=r.$implicit,i=r.index;s("pSortableColumn",e.field)("pSortableColumnDisabled",i===1),c(),s("ngIf",e.field!=="image"),c(),_(" ",e.header," ")}}function se(t,r){if(t&1&&(o(0,"tr"),u(1,pe,3,4,"th",15),o(2,"th"),l(3,"Actions"),n()()),t&2){let e=r.$implicit;c(),s("ngForOf",e)}}function me(t,r){if(t&1&&(F(0),l(1),B()),t&2){let e=p().$implicit,i=p().$implicit;c(),g(i[e.field])}}function de(t,r){if(t&1&&m(0,"img",24),t&2){let e=p().$implicit,i=p().$implicit;s("src",i[e.field],I)}}function ue(t,r){if(t&1&&(o(0,"span"),l(1),n()),t&2){let e=p().$implicit,i=p().$implicit;c(),_(" ",i[e.field],"")}}function _e(t,r){if(t&1&&(o(0,"span"),l(1),y(2,"date"),n()),t&2){let e=p().$implicit,i=p().$implicit;c(),_(" ",w(2,1,i[e.field],"dd/MM/yyyy"),"")}}function fe(t,r){if(t&1&&(o(0,"span"),l(1),y(2,"currency"),n()),t&2){let e=p().$implicit,i=p().$implicit;c(),g(E(2,1,i[e.field]))}}function ge(t,r){if(t&1&&(o(0,"span"),l(1),n()),t&2){let e=p().$implicit,i=p().$implicit;c(),g(i[e.field])}}function xe(t,r){if(t&1&&(o(0,"td"),u(1,me,2,1,"ng-container",22)(2,de,1,1,"img",23)(3,ue,2,1,"span",22)(4,_e,3,4,"span",22)(5,fe,3,3,"span",22)(6,ge,2,1,"span",22),n()),t&2){let e=r.$implicit;c(),s("ngIf",e.field==="name"),c(),s("ngIf",e.field==="image"),c(),s("ngIf",e.field==="category"),c(),s("ngIf",e.field==="dateCreated"),c(),s("ngIf",e.field==="price"),c(),s("ngIf",e.field!=="image"&&e.field!=="name"&&e.field!=="category"&&e.field!=="dateCreated"&&e.field!=="price")}}function Ce(t,r){if(t&1){let e=b();o(0,"tr"),u(1,xe,7,6,"td",19),o(2,"td")(3,"p-button",20),S("click",function(){let d=x(e).$implicit,f=p(2);return C(f.onDeleteProduct(d.id))}),n(),m(4,"p-button",21),n()()}if(t&2){let e=r.$implicit,i=r.columns;c(),s("ngForOf",i),c(3),P("routerLink","/products/form/",e.id,"")}}function ve(t,r){if(t&1){let e=b();o(0,"li",25)(1,"div",26)(2,"div",27)(3,"h1"),l(4),n(),m(5,"img",24),n()(),o(6,"div",28)(7,"div",29)(8,"p",30)(9,"span"),l(10,"Price"),n(),l(11),y(12,"currency"),n(),o(13,"p",31)(14,"span"),l(15,"Stock"),n(),l(16),n()(),o(17,"div",32)(18,"p",33)(19,"span"),l(20,"Category"),n(),l(21),n(),o(22,"p",34)(23,"span"),l(24,"Date"),n(),l(25),y(26,"date"),n()(),o(27,"div",35)(28,"button",36),m(29,"i",37),n(),o(30,"button",38),S("click",function(){let d=x(e).$implicit,f=p(2);return C(f.onDeleteProduct(d.id))}),m(31,"i",39),n()()()()}if(t&2){let e=r.$implicit;c(4),g(e.name),c(),M("src",e.image,I),c(6),_(" ",E(12,7,e.price)," "),c(5),_(" ",e.countInStock," "),c(5),_(" ",e.category," "),c(4),_(" ",w(26,9,e.dateCreated,"dd/MM/yyyy")," "),c(3),P("routerLink","/products/form/",e.id,"")}}function Se(t,r){if(t&1&&(o(0,"section",4)(1,"div",5)(2,"h1"),l(3,"Products"),n(),o(4,"p"),l(5,"List of all products"),n()(),o(6,"div",6)(7,"button",7),m(8,"i",8),o(9,"span"),l(10,"New"),n()()(),o(11,"p-table",9),u(12,se,4,1,"ng-template",10)(13,Ce,5,2,"ng-template",11),n(),o(14,"div",12)(15,"ul",13),u(16,ve,32,12,"li",14),n()()()),t&2){let e=p();c(11),s("paginator",!0)("rows",10)("showCurrentPageReport",!0)("columns",e.cols)("value",e.products),c(5),s("ngForOf",e.products)("ngForTrackBy",e.trackByProductId)}}function ye(t,r){t&1&&(o(0,"div",40)(1,"p"),m(2,"i",41),n()())}function be(t,r){if(t&1){let e=b();o(0,"div",42)(1,"div",43),m(2,"i",44),n(),o(3,"span",45),l(4),n(),o(5,"p",46),l(6),n(),o(7,"div",47)(8,"button",48),S("click",function(){x(e),p();let a=h(5);return C(a.accept())}),n(),o(9,"button",49),S("click",function(){x(e),p();let a=h(5);return C(a.reject())}),n()()()}if(t&2){let e=r.$implicit;c(4),g(e.header),c(2),g(e.message)}}var Ne=(()=>{let r=class r{constructor(i,a,d,f){this.confirmationService=i,this.productsService=a,this.messageService=d,this.router=f,this.cols=[{field:"name",header:"Name"},{field:"image",header:"Image"},{field:"price",header:"Price"},{field:"countInStock",header:"Stock"},{field:"category",header:"Category"},{field:"dateCreated",header:"Created at"}]}ngOnInit(){this.getProducts(),this.listenUrlChanges()}getProducts(){this.productsService.getProducts(),this.productsService.products$.pipe(L(i=>i.map(a=>k(T({},a),{category:a.category.name})))).subscribe({next:i=>{this.products=i}})}onDeleteProduct(i){this.confirmationService.confirm({header:"Delete Product",message:"Are you sure you want to delete this Product?",accept:()=>{this.productsService.deleteProduct(i).subscribe({next:a=>{this.products=this.products.filter(d=>d.id!==a.id),this.messageService.add({severity:"success",summary:"Success",detail:`The product "${a.name}" is deleted successfully!`})},error:a=>{console.error("Cannot delete product",a)}})},reject:()=>{}})}listenUrlChanges(){this.urlChangesSubscription=this.router.events.pipe(D(i=>i instanceof A)).subscribe({next:()=>{this.getProducts()},error:i=>{console.error("Cannot get url changes!",i)}})}trackByProductId(i,a){return a.id}ngOnDestroy(){this.urlChangesSubscription?.unsubscribe()}};r.\u0275fac=function(a){return new(a||r)(v(K),v(J),v(Q),v(G))},r.\u0275cmp=$({type:r,selectors:[["admin-product-list"]],standalone:!0,features:[V],decls:8,vars:2,consts:[["class","products-page",4,"ngIf","ngIfElse"],["loader",""],["cd",""],["pTemplate","headless"],[1,"products-page"],[1,"name-page"],[1,"btn-container"],["routerLink","/products/form",1,"btn-create-edit-product"],[1,"pi","pi-plus"],[1,"p-table",3,"paginator","rows","showCurrentPageReport","columns","value"],["pTemplate","header"],["pTemplate","body"],[1,"products-tablet-mobile"],[1,"product-list"],["class","product",4,"ngFor","ngForOf","ngForTrackBy"],[3,"pSortableColumn","pSortableColumnDisabled",4,"ngFor","ngForOf"],[3,"pSortableColumn","pSortableColumnDisabled"],[3,"field",4,"ngIf"],[3,"field"],[4,"ngFor","ngForOf"],["styleClass","p-button-trash","icon","pi pi-trash",3,"click"],["styleClass","p-button-pencil","icon","pi pi-pencil",3,"routerLink"],[4,"ngIf"],["alt","product",3,"src",4,"ngIf"],["alt","product",3,"src"],[1,"product"],[1,"row-1"],[1,"name-img-container"],[1,"row-2"],[1,"price-stock-container"],[1,"price"],[1,"stock"],[1,"category-date-container"],[1,"category"],[1,"date"],[1,"actions"],[1,"btn-edit-product",3,"routerLink"],[1,"pi","pi-pencil"],[1,"btn-delete-product",3,"click"],[1,"pi","pi-trash"],[1,"loader-container"],[1,"pi","pi-spin","pi-spinner"],[1,"confirm-modal","flex","flex-column","align-items-center","p-5","border-round"],[1,"icon","border-circle","inline-flex","justify-content-center","align-items-center","h-6rem","w-6rem","-mt-8"],[1,"pi","pi-question","text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","align-items-center","gap-2","mt-4"],["pButton","","label","Save",1,"w-8rem",3,"click"],["pButton","","label","Cancel",1,"p-button-outlined","w-8rem",3,"click"]],template:function(a,d){if(a&1&&(u(0,Se,17,7,"section",0)(1,ye,3,0,"ng-template",null,1,O),m(3,"p-toast"),o(4,"p-confirmDialog",null,2),u(6,be,10,2,"ng-template",3),n(),m(7,"router-outlet")),a&2){let f=h(2);s("ngIf",d.products)("ngIfElse",f)}},dependencies:[z,j,R,U,N,H,q,te,Z,ee,W,Y,X,ne,ie,ae,oe,re,ce]});let t=r;return t})();export{Ne as ProductListComponent};
