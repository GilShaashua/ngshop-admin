import{a as q}from"./chunk-BX2MZUOO.js";import{a as U}from"./chunk-JXER6VOR.js";import{a as oe,b as le}from"./chunk-OGTTQIOL.js";import{a as Q,b as X,c as Y,d as Z,e as ee,f as te,g as ie,h as ne,i as re}from"./chunk-IZD4GX7W.js";import"./chunk-TIMMUOPY.js";import"./chunk-SHWCDSVJ.js";import{Ab as A,Ba as I,Bb as N,Cc as G,Fa as o,Ga as n,Ha as _,Hc as H,Ia as S,Ja as C,La as h,M,Ma as b,Na as s,Pb as R,R as x,Ra as T,Rc as J,S as v,Sc as K,Xa as O,Ya as c,Za as u,_a as V,bb as F,cb as w,h as E,la as l,lb as y,ma as g,mb as D,nb as L,pb as B,vb as P,wa as m,wb as j,ya as p,yc as W,zb as z}from"./chunk-7I2OQVDN.js";import{a as k,b as $}from"./chunk-CWTPBX7D.js";function se(t,r){if(t&1&&(o(0,"th",13),_(1,"p-sortIcon",14),c(2),n()),t&2){let e=r.$implicit;p("pSortableColumn",e.field),l(),p("field",e.field),l(),V(" ",e.header," ")}}function ce(t,r){if(t&1&&(o(0,"tr"),m(1,se,3,3,"th",12),o(2,"th"),c(3,"Actions"),n()()),t&2){let e=r.$implicit;l(),p("ngForOf",e)}}function pe(t,r){if(t&1&&(S(0),c(1),C()),t&2){let e=s().$implicit,i=s().$implicit;l(),u(i[e.field])}}function de(t,r){if(t&1&&(S(0),c(1),y(2,"currency"),C()),t&2){let e=s().$implicit,i=s().$implicit;l(),u(D(2,1,i[e.field]))}}function me(t,r){if(t&1&&(S(0),c(1),y(2,"date"),C()),t&2){let e=s().$implicit,i=s().$implicit;l(),u(L(2,1,i[e.field],"dd/MM/yyyy"))}}var ae=()=>({fontSize:"14px",paddingInline:"15px",height:"30px"});function _e(t,r){if(t&1&&(S(0),_(1,"p-tag",19),C()),t&2){let e=s().$implicit,i=s().$implicit,a=s(3);l(),I(w(5,ae)),p("rounded",!0)("value",a.orderStatus[i[e.field]].label)("severity",a.orderStatus[i[e.field]].color)}}function ue(t,r){if(t&1&&(o(0,"td"),m(1,pe,2,1,"ng-container",18)(2,de,3,3,"ng-container",18)(3,me,3,4,"ng-container",18)(4,_e,2,6,"ng-container",18),n()),t&2){let e=r.$implicit;l(),p("ngIf",e.field==="user"),l(),p("ngIf",e.field==="totalPrice"),l(),p("ngIf",e.field==="dateOrdered"),l(),p("ngIf",e.field==="status")}}function fe(t,r){if(t&1){let e=h();o(0,"tr"),m(1,ue,5,4,"td",15),o(2,"td")(3,"p-button",16),b("click",function(){let d=x(e).$implicit,f=s(3);return v(f.onDeleteOrder(d.id))}),n(),_(4,"p-button",17),n()()}if(t&2){let e=r.$implicit,i=r.columns;l(),p("ngForOf",i),l(3),T("routerLink","/orders/",e.id,"")}}function xe(t,r){if(t&1&&(o(0,"p-table",9),m(1,ce,4,1,"ng-template",10)(2,fe,5,2,"ng-template",11),n()),t&2){let e=s(2);p("columns",e.cols)("value",e.orders)}}function ve(t,r){if(t&1){let e=h();o(0,"li")(1,"div",21)(2,"p-button",16),b("click",function(){let d=x(e).$implicit,f=s(3);return v(f.onDeleteOrder(d.id))}),n(),_(3,"p-button",17),n(),o(4,"div",22)(5,"div",23)(6,"div",24)(7,"span"),c(8,"User"),n(),o(9,"p"),c(10),n()(),o(11,"div",25)(12,"span"),c(13,"Total Price"),n(),o(14,"p"),c(15),y(16,"currency"),n()()(),o(17,"div",26)(18,"div",27)(19,"span"),c(20,"Date Ordered"),n(),o(21,"p"),c(22),y(23,"date"),n()(),o(24,"div",28)(25,"span"),c(26,"Status"),n(),_(27,"p-tag",19),n()()()()}if(t&2){let e=r.$implicit,i=s(3);l(3),T("routerLink","/orders/",e.id,""),l(7),u(e.user),l(5),u(D(16,9,e.totalPrice)),l(7),u(L(23,11,e.dateOrdered,"dd/MM/yyyy")),l(5),I(w(14,ae)),p("rounded",!0)("value",i.orderStatus[e.status].label)("severity",i.orderStatus[e.status].color)}}function ge(t,r){if(t&1&&(o(0,"div",20)(1,"ul"),m(2,ve,28,15,"li",15),n()()),t&2){let e=s(2);l(2),p("ngForOf",e.orders)}}function Se(t,r){t&1&&(o(0,"div",29)(1,"p"),c(2,"There are no orders yet!"),n()())}function Ce(t,r){if(t&1&&(o(0,"section",4)(1,"div",5)(2,"h1"),c(3,"Orders"),n(),o(4,"p"),c(5,"List of all orders"),n()(),m(6,xe,3,2,"p-table",6)(7,ge,3,1,"div",7)(8,Se,3,0,"div",8),n()),t&2){let e=s();l(6),p("ngIf",e.isDesktop),l(),p("ngIf",!e.isDesktop),l(),p("ngIf",!e.orders.length)}}function be(t,r){t&1&&(o(0,"div",30)(1,"p"),_(2,"i",31),n()())}function ye(t,r){if(t&1){let e=h();o(0,"div",32)(1,"div",33),_(2,"i",34),n(),o(3,"span",35),c(4),n(),o(5,"p",36),c(6),n(),o(7,"div",37)(8,"button",38),b("click",function(){x(e),s();let a=O(5);return v(a.accept())}),n(),o(9,"button",39),b("click",function(){x(e),s();let a=O(5);return v(a.reject())}),n()()()}if(t&2){let e=r.$implicit;l(4),u(e.header),l(2),u(e.message)}}var Ae=(()=>{let r=class r{constructor(i,a,d,f){this.messageService=i,this.confirmationService=a,this.ordersService=d,this.viewportSizeService=f,this.cols=[{field:"user",header:"User"},{field:"totalPrice",header:"Total price"},{field:"dateOrdered",header:"Date ordered"},{field:"status",header:"Status"}],this.orderStatus={0:{label:"Pending",color:"primary"},1:{label:"Processed",color:"warning"},2:{label:"Shipped",color:"info"},3:{label:"Delivered",color:"success"},4:{label:"Failed",color:"danger"}}}ngOnInit(){this._observeViewportSize(),this.getOrders()}_observeViewportSize(){this.viewportSizeService.viewportWidth$.pipe(E(i=>i>=1025)).subscribe(i=>{this.isDesktop=i})}getOrders(){this.ordersService.getOrders().pipe(E(i=>i.map(d=>$(k({},d),{user:d.user.name})))).subscribe({next:i=>{this.orders=i},error:i=>{console.error("Cannot get orders",i)}})}onDeleteOrder(i){this.confirmationService.confirm({header:"Delete Order",message:"Are you sure you want to delete this Order?",accept:()=>{this.ordersService.deleteOrder(i).subscribe({next:a=>{this.orders=this.orders.filter(d=>d.id!==a.id),this.messageService.add({severity:"success",summary:"Success",detail:`The order "${a.id}" is deleted successfully!`})},error:a=>{console.error("Cannot delete order",a)}})},reject:()=>{}})}ngOnDestroy(){}};r.\u0275fac=function(a){return new(a||r)(g(G),g(W),g(U),g(q))},r.\u0275cmp=M({type:r,selectors:[["admin-orders-list"]],standalone:!0,features:[F],decls:7,vars:2,consts:[["class","orders-page",4,"ngIf","ngIfElse"],["loader",""],["cd",""],["pTemplate","headless"],[1,"orders-page"],[1,"name-page"],["class","p-table",3,"columns","value",4,"ngIf"],["class","orders-list-tablet-mobile",4,"ngIf"],["class","no-orders",4,"ngIf"],[1,"p-table",3,"columns","value"],["pTemplate","header"],["pTemplate","body"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[4,"ngFor","ngForOf"],["styleClass","p-button-trash","icon","pi pi-trash",3,"click"],["styleClass","p-button-details","icon","pi pi-eye",3,"routerLink"],[4,"ngIf"],[3,"rounded","value","severity"],[1,"orders-list-tablet-mobile"],[1,"header"],[1,"body"],[1,"row-1"],[1,"user"],[1,"total-price"],[1,"row-2"],[1,"date-ordered"],[1,"status"],[1,"no-orders"],[1,"loader-container"],[1,"pi","pi-spin","pi-spinner"],[1,"confirm-modal","flex","flex-column","align-items-center","p-5","border-round"],[1,"icon","border-circle","inline-flex","justify-content-center","align-items-center","h-6rem","w-6rem","-mt-8"],[1,"pi","pi-question","text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","align-items-center","gap-2","mt-4"],["pButton","","label","Save",1,"w-8rem",3,"click"],["pButton","","label","Cancel",1,"p-button-outlined","w-8rem",3,"click"]],template:function(a,d){if(a&1&&(m(0,Ce,9,3,"section",0)(1,be,3,0,"ng-template",null,1,B),_(3,"p-toast"),o(4,"p-confirmDialog",null,2),m(6,ye,10,2,"ng-template",3),n()),a&2){let f=O(2);p("ngIf",d.orders&&d.isDesktop!==void 0)("ngIfElse",f)}},dependencies:[N,P,j,A,z,Y,Q,X,H,ee,Z,R,re,te,ie,ne,K,J,le,oe]});let t=r;return t})();export{Ae as OrdersListComponent};
