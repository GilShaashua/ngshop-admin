import{o as g}from"./chunk-OVKFVBDW.js";import{I as c,L as n,Nb as i,Ob as u,bc as d,c as o,t as h}from"./chunk-5BBGCJT5.js";var y=(()=>{let r=class r{constructor(t,s){this.http=t,this.authService=s,this._filterBy$=new o({categories:[],name:""}),this.filterBy$=this._filterBy$.asObservable(),this._products$=new o({products:[],pageCount:0}),this.products$=this._products$.asObservable(),this._isNgShopProductsLoading$=new o(!1),this.isNgShopProductsLoading$=this._isNgShopProductsLoading$.asObservable(),this.apiUrl=d.API_URL}getProducts({currPage:t,pageSize:s}={}){this.setNgShopProductsLoading(!0);let e=new i;this._filterBy$.value.categories.length&&(e=e.append("categories",this._filterBy$.value.categories.join(","))),this._filterBy$.value.name&&(e=e.append("products",this._filterBy$.value.name)),t&&s&&(e=e.append("currPage",t),e=e.append("pageSize",s)),this.http.get(`${this.apiUrl}products`,{params:e}).pipe(h(1)).subscribe({next:p=>{this._setProducts(p),this.setNgShopProductsLoading(!1)},error:p=>{console.error("err",p)}})}_setProducts(t){this._products$.next(t)}setNgShopProductsLoading(t){this._isNgShopProductsLoading$.next(t)}getProductById(t){return this.http.get(`${this.apiUrl}products/${t}`)}addProduct(t){let s=new i().append("isLoginFast",this.authService.getIsLoginFast());return this.http.post(`${this.apiUrl}products`,t,{params:s})}editProduct(t){let s=new i().append("isLoginFast",this.authService.getIsLoginFast());return this.http.put(`${this.apiUrl}products/${t.get("id")}`,t,{params:s})}editProductGallery(t,s){let e=new i().append("isLoginFast",this.authService.getIsLoginFast());return this.http.put(`${this.apiUrl}products/gallery-images/${s}`,t,{params:e})}deleteProduct(t){let s=new i().append("isLoginFast",this.authService.getIsLoginFast());return this.http.delete(`${this.apiUrl}products/${t}`,{params:s})}getProductsCount(){let t=new i().append("isLoginFast",this.authService.getIsLoginFast());return this.http.get(`${this.apiUrl}products/get/count`,{params:t})}getFeaturedProducts(t){return this.http.get(`${this.apiUrl}products/get/featured/${t}`)}setFilterBy(t){this._filterBy$.next(t)}getProductStatistics(){let t=new i().append("isLoginFast",this.authService.getIsLoginFast());return this.http.get(`${this.apiUrl}products/get/statistics`,{params:t})}};r.\u0275fac=function(s){return new(s||r)(n(u),n(g))},r.\u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})();export{y as a};
