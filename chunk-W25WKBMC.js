import{a as _e}from"./chunk-JXER6VOR.js";import{a as U}from"./chunk-TIMMUOPY.js";import{g as De,h as Fe}from"./chunk-SHWCDSVJ.js";import{$b as fe,Ab as pe,Bb as T,Ca as w,Cc as Ce,Ea as I,Fa as o,Ga as r,H as K,Ha as u,Hc as ye,Ia as P,Ic as Ie,Ja as k,Ka as b,Kc as be,L as j,La as B,M as x,Ma as E,Mb as me,N as G,Na as p,Oa as ee,Pa as R,Pb as ge,Pc as Se,Qc as Te,R as h,Rc as Ee,S as C,Sc as Oe,T as Z,Ta as te,U as J,Va as ie,Wa as ne,Xa as O,Ya as a,Za as _,Zb as ue,_a as f,bb as V,db as D,eb as oe,fa as W,fc as ve,jc as xe,kc as $,la as n,lb as S,ma as y,mc as L,nb as re,nc as q,ob as F,oc as Q,pb as A,qa as M,rb as H,ta as X,ua as Y,ub as ae,vb as le,vc as he,wa as m,wb as N,xa as g,xb as se,ya as d,yb as de,zb as ce}from"./chunk-7I2OQVDN.js";import"./chunk-CWTPBX7D.js";var z=(()=>{class e extends be{static \u0275fac=(()=>{let t;return function(i){return(t||(t=J(e)))(i||e)}})();static \u0275cmp=x({type:e,selectors:[["MinusIcon"]],standalone:!0,features:[X,V],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z","fill","currentColor"]],template:function(s,i){s&1&&(Z(),o(0,"svg",0),u(1,"path",1),r()),s&2&&(w(i.getClassNames()),g("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},dependencies:[T],encapsulation:2})}return e})();function Be(e,l){e&1&&u(0,"PlusIcon",11),e&2&&(d("styleClass","p-fieldset-toggler"),g("data-pc-section","togglericon"))}function Ve(e,l){e&1&&b(0)}function Ae(e,l){if(e&1&&(o(0,"span",12),m(1,Ve,1,0,"ng-container",6),r()),e&2){let t=p(3);g("data-pc-section","togglericon"),n(),d("ngTemplateOutlet",t.expandIconTemplate)}}function Ne(e,l){if(e&1&&(P(0),m(1,Be,1,2,"PlusIcon",9)(2,Ae,2,2,"span",10),k()),e&2){let t=p(2);n(),d("ngIf",!t.expandIconTemplate),n(),d("ngIf",t.expandIconTemplate)}}function je(e,l){e&1&&u(0,"MinusIcon",11),e&2&&(d("styleClass","p-fieldset-toggler"),g("aria-hidden",!0)("data-pc-section","togglericon"))}function Re(e,l){e&1&&b(0)}function He(e,l){if(e&1&&(o(0,"span",12),m(1,Re,1,0,"ng-container",6),r()),e&2){let t=p(3);g("data-pc-section","togglericon"),n(),d("ngTemplateOutlet",t.collapseIconTemplate)}}function $e(e,l){if(e&1&&(P(0),m(1,je,1,3,"MinusIcon",9)(2,He,2,2,"span",10),k()),e&2){let t=p(2);n(),d("ngIf",!t.collapseIconTemplate),n(),d("ngIf",t.collapseIconTemplate)}}function Le(e,l){e&1&&b(0)}function qe(e,l){if(e&1){let t=B();P(0),o(1,"a",7),E("click",function(i){h(t);let c=p();return C(c.toggle(i))})("keydown",function(i){h(t);let c=p();return C(c.onKeyDown(i))}),m(2,Ne,3,2,"ng-container",8)(3,$e,3,2,"ng-container",8)(4,Le,1,0,"ng-container",6),r(),k()}if(e&2){let t=p(),s=O(4);n(),g("id",t.id+"_header")("aria-controls",t.id+"_content")("aria-expanded",!t.collapsed)("aria-label",t.buttonAriaLabel),n(),d("ngIf",t.collapsed),n(),d("ngIf",!t.collapsed),n(),d("ngTemplateOutlet",s)}}function Qe(e,l){e&1&&b(0)}function Ue(e,l){if(e&1&&(o(0,"span",13),a(1),r(),R(2,1),m(3,Qe,1,0,"ng-container",6)),e&2){let t=p();g("data-pc-section","legendtitle"),n(),_(t.legend),n(2),d("ngTemplateOutlet",t.headerTemplate)}}function ze(e,l){e&1&&b(0)}var Ke=["*",[["p-header"]]],Ge=(e,l)=>({"p-fieldset p-component":!0,"p-fieldset-toggleable":e,"p-fieldset-expanded":l}),Ze=e=>({transitionParams:e,height:"0"}),Je=e=>({value:"hidden",params:e}),We=e=>({transitionParams:e,height:"*"}),Xe=e=>({value:"visible",params:e}),Ye=["*","p-header"],we=(()=>{class e{el;legend;toggleable;collapsed=!1;style;styleClass;transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)";collapsedChange=new M;onBeforeToggle=new M;onAfterToggle=new M;templates;get id(){return he()}get buttonAriaLabel(){return this.legend}animating;headerTemplate;contentTemplate;collapseIconTemplate;expandIconTemplate;constructor(t){this.el=t}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"expandicon":this.expandIconTemplate=t.template;break;case"collapseicon":this.collapseIconTemplate=t.template;break;case"content":this.contentTemplate=t.template;break}})}toggle(t){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:t,collapsed:this.collapsed}),this.collapsed?this.expand():this.collapse(),this.onAfterToggle.emit({originalEvent:t,collapsed:this.collapsed}),t.preventDefault()}onKeyDown(t){(t.code==="Enter"||t.code==="Space")&&(this.toggle(t),t.preventDefault())}expand(){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(){this.animating=!1}static \u0275fac=function(s){return new(s||e)(y(W))};static \u0275cmp=x({type:e,selectors:[["p-fieldset"]],contentQueries:function(s,i,c){if(s&1&&te(c,ye,4),s&2){let v;ie(v=ne())&&(i.templates=v)}},hostAttrs:[1,"p-element"],inputs:{legend:"legend",toggleable:[j.HasDecoratorInputTransform,"toggleable","toggleable",H],collapsed:[j.HasDecoratorInputTransform,"collapsed","collapsed",H],style:"style",styleClass:"styleClass",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},features:[Y],ngContentSelectors:Ye,decls:9,vars:28,consts:[[3,"ngClass","ngStyle"],[1,"p-fieldset-legend"],[4,"ngIf","ngIfElse"],["legendContent",""],["role","region",1,"p-toggleable-content"],[1,"p-fieldset-content"],[4,"ngTemplateOutlet"],["pRipple","","tabindex","0","role","button",3,"click","keydown"],[4,"ngIf"],[3,"styleClass",4,"ngIf"],["class","p-fieldset-toggler",4,"ngIf"],[3,"styleClass"],[1,"p-fieldset-toggler"],[1,"p-fieldset-legend-text"]],template:function(s,i){if(s&1&&(ee(Ke),o(0,"fieldset",0)(1,"legend",1),m(2,qe,5,7,"ng-container",2)(3,Ue,4,3,"ng-template",null,3,A),r(),o(5,"div",4),E("@fieldsetContent.done",function(){return i.onToggleDone()}),o(6,"div",5),R(7),m(8,ze,1,0,"ng-container",6),r()()()),s&2){let c=O(4);w(i.styleClass),d("ngClass",oe(17,Ge,i.toggleable,!i.collapsed&&i.toggleable))("ngStyle",i.style),g("id",i.id)("data-pc-name","fieldset")("data-pc-section","root"),n(),g("data-pc-section","legend"),n(),d("ngIf",i.toggleable)("ngIfElse",c),n(3),d("@fieldsetContent",i.collapsed?D(22,Je,D(20,Ze,i.transitionOptions)):D(26,Xe,D(24,We,i.animating?i.transitionOptions:"0ms"))),g("id",i.id+"_content")("aria-labelledby",i.id+"_header")("aria-hidden",i.collapsed)("data-pc-section","toggleablecontent"),n(),g("data-pc-section","content"),n(2),d("ngTemplateOutlet",i.contentTemplate)}},dependencies:()=>[ae,N,de,se,Se,z,U],styles:[`@layer primeng{.p-fieldset{min-width:initial}.p-fieldset-legend>a,.p-fieldset-legend>span{display:flex;align-items:center;justify-content:center}.p-fieldset-toggleable .p-fieldset-legend a{cursor:pointer;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-fieldset-legend-text{line-height:1}.p-fieldset-toggleable.p-fieldset-expanded>.p-toggleable-content:not(.ng-animating){overflow:visible}.p-fieldset-toggleable .p-toggleable-content{overflow:hidden}}
`],encapsulation:2,data:{animation:[xe("fieldsetContent",[q("hidden",L({height:"0"})),q("visible",L({height:"*"})),Q("visible <=> hidden",[$("{{transitionParams}}")]),Q("void => *",$(0))])]},changeDetection:0})}return e})(),Pe=(()=>{class e{static \u0275fac=function(s){return new(s||e)};static \u0275mod=G({type:e});static \u0275inj=K({imports:[T,Te,z,U,Ie]})}return e})();function tt(e,l){if(e&1&&(o(0,"h4"),a(1,"Name"),r(),a(2)),e&2){let t=p().$implicit;n(2),f(" ",t.product.name," ")}}function it(e,l){e&1&&a(0," Product doesnt exist! ")}function nt(e,l){if(e&1&&(o(0,"h4"),a(1,"Brand"),r(),a(2)),e&2){let t=p().$implicit;n(2),f(" ",t.product.brand," ")}}function ot(e,l){e&1&&a(0," Product doesnt exist! ")}function rt(e,l){if(e&1&&(o(0,"h4"),a(1,"Category"),r(),a(2)),e&2){let t=p().$implicit;n(2),f(" ",t.product.category.name," ")}}function at(e,l){e&1&&a(0," Product doesnt exist! ")}function lt(e,l){if(e&1&&(o(0,"h4"),a(1,"Price"),r(),a(2),S(3,"currency")),e&2){let t=p().$implicit;n(2),f(" ",F(3,1,t.product.price,"USD","symbol","1.0-0")," ")}}function st(e,l){e&1&&a(0," Product doesnt exist! ")}function dt(e,l){if(e&1&&(o(0,"h4"),a(1,"Subtotal"),r(),a(2),S(3,"currency")),e&2){let t=p().$implicit;n(2),f(" ",F(3,1,t.quantity*t.product.price,"USD","symbol","1.0-0")," ")}}function ct(e,l){e&1&&a(0," Product doesnt exist! ")}function pt(e,l){if(e&1&&(o(0,"div",20)(1,"div",21),m(2,tt,3,1)(3,it,1,0),r(),o(4,"div",22),m(5,nt,3,1)(6,ot,1,0),r(),o(7,"div",23),m(8,rt,3,1)(9,at,1,0),r(),o(10,"div",24),m(11,lt,4,6)(12,st,1,0),r(),o(13,"div",25)(14,"h4"),a(15,"Quantity"),r(),a(16),r(),o(17,"div",26),m(18,dt,4,6)(19,ct,1,0),r()()),e&2){let t=l.$implicit;n(2),I(2,t.product?2:3),n(3),I(5,t.product?5:6),n(3),I(8,t.product?8:9),n(3),I(11,t.product?11:12),n(5),f(" ",t.quantity," "),n(2),I(18,t.product?18:19)}}function mt(e,l){if(e&1){let t=B();o(0,"section",2)(1,"button",3),u(2,"i",4),r(),o(3,"p-fieldset",5)(4,"div",6)(5,"h4"),a(6,"Id"),r(),o(7,"p"),a(8),r()(),o(9,"div",7)(10,"h4"),a(11,"Ordered by"),r(),o(12,"p"),a(13),r()(),o(14,"div",8)(15,"h4"),a(16,"Date"),r(),o(17,"p"),a(18),S(19,"date"),r()(),o(20,"div",9)(21,"h4"),a(22,"Total price"),r(),o(23,"p"),a(24),S(25,"currency"),r()(),o(26,"div",10)(27,"h4"),a(28,"Status"),r(),o(29,"p-dropdown",11),E("ngModelChange",function(i){h(t);let c=p();return C(c.order.status=i)})("onChange",function(i){h(t);let c=p();return C(c.onHandleOrderStatus(i))}),r()()(),o(30,"p-fieldset",12),m(31,pt,20,6,"div",13),o(32,"div",14)(33,"h4"),a(34,"Total price"),r(),o(35,"span"),a(36),S(37,"currency"),r()()(),o(38,"p-fieldset",15)(39,"div",16)(40,"h4"),a(41,"Order address"),r(),o(42,"h4"),a(43,"Customer info"),r()(),o(44,"div",17)(45,"div",18)(46,"p"),a(47),r(),o(48,"p"),a(49),r(),o(50,"p"),a(51),r(),o(52,"p"),a(53),r()(),o(54,"div",19)(55,"p"),a(56),r(),o(57,"p"),a(58),r()()()()()}if(e&2){let t=p();n(3),d("toggleable",!0),n(5),_(t.order.id),n(5),_(t.order.user.name),n(5),_(re(19,17,t.order.dateOrdered,"dd/MM/yyyy HH:mm")),n(6),f(" ",F(25,20,t.order.totalPrice,"USD","symbol","1.0-0")," "),n(5),d("ngModel",t.order.status)("options",t.statusOptions),n(),d("toggleable",!0),n(),d("ngForOf",t.order.orderItems),n(5),_(F(37,25,t.order.totalPrice,"USD","symbol","1.0-0")),n(2),d("toggleable",!0),n(9),_(t.order.shippingAddress1),n(2),_(t.order.city),n(2),_(t.order.zip),n(2),_(t.order.country),n(3),_(t.order.user.name),n(2),_(t.order.phone)}}function gt(e,l){e&1&&(o(0,"div",27)(1,"p"),u(2,"i",28),r()())}var zt=(()=>{let l=class l{constructor(s,i,c){this.ordersService=s,this.router=i,this.messageService=c,this.statusOptions=[{label:"Pending",value:"0"},{label:"Processed",value:"1"},{label:"Shipped",value:"2"},{label:"Delivered",value:"3"},{label:"Failed",value:"4"}]}ngOnInit(){this._checkParams()}_checkParams(){this.router.params.subscribe(s=>{s.orderId&&this.ordersService.getOrderById(s.orderId).subscribe(i=>{this.order=i,this.primaryOrderStatus=this.order.status})})}onHandleOrderStatus(s){let i=null,c=this.statusOptions.find(v=>v.value===s.value);c?(i=c.label,this.order.status=s.value,this._updateOrder(i)):(this.messageService.add({severity:"error",summary:"Error",detail:"The order status cannot be changed!"}),console.error("Cannot change order status"))}_updateOrder(s){this.ordersService.editOrder(this.order).subscribe({next:i=>{this.messageService.add({severity:"success",summary:"Success",detail:`The order status changed to "${s}"`})},error:i=>{this.messageService.add({severity:"error",summary:"Error",detail:`The order status cannot be changed to "${s}"`}),this.order.status=this.primaryOrderStatus,console.error("Cannot change order status",i)}})}ngOnDestroy(){}};l.\u0275fac=function(i){return new(i||l)(y(_e),y(me),y(Ce))},l.\u0275cmp=x({type:l,selectors:[["admin-orders-details"]],standalone:!0,features:[V],decls:4,vars:2,consts:[["class","order-details-page",4,"ngIf","ngIfElse"],["loader",""],[1,"order-details-page"],["routerLink","/orders"],[1,"pi","pi-angle-left"],["legend","Order details","styleClass","fieldset order-details",3,"toggleable"],[1,"order-container","order-id"],[1,"order-container","order-user"],[1,"order-container","order-date"],[1,"order-container","order-total-price"],[1,"order-container","order-status"],["optionLabel","label","optionValue","value","placeholder","Select a status",3,"ngModel","options","ngModelChange","onChange"],["legend","Order items","styleClass","fieldset order-items",3,"toggleable"],["class","order-items",4,"ngFor","ngForOf"],[1,"total-price"],["legend","Order address","styleClass","fieldset order-address",3,"toggleable"],[1,"headers"],[1,"content"],[1,"address"],[1,"info"],[1,"order-items"],[1,"order-item","product-name"],[1,"order-item","product-brand"],[1,"order-item","product-category"],[1,"order-item","product-price"],[1,"order-item","product-quantity"],[1,"order-item","subtotal"],[1,"loader-container"],[1,"pi","pi-spin","pi-spinner"]],template:function(i,c){if(i&1&&(m(0,mt,59,30,"section",0)(1,gt,3,0,"ng-template",null,1,A),u(3,"p-toast")),i&2){let v=O(2);d("ngIf",c.order)("ngIfElse",v)}},dependencies:[T,le,N,pe,ce,ge,Pe,we,Fe,De,ve,ue,fe,Oe,Ee]});let e=l;return e})();export{zt as OrdersDetailsComponent};
