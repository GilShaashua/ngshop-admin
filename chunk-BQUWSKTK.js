import{a as ne,b as oe}from"./chunk-GOABQKNH.js";import{a as me,b as z}from"./chunk-L6LDCXM6.js";import{a as R,b as J,c as K,d as Q,e as X,f as Y,g as Z,h as ee,i as te,j as ie}from"./chunk-YVZFOE3Y.js";import"./chunk-VX3D6ALI.js";import{a as G,b as H}from"./chunk-SHJRNU5D.js";import{I as P,M as q,R as W}from"./chunk-COXHLCCB.js";import"./chunk-OVKFVBDW.js";import{$a as h,Da as x,Eb as V,Fb as F,Ha as r,Ia as o,Ja as c,Kb as M,Na as S,Oa as v,P as I,Pa as m,S as D,Ta as U,Ub as O,Wb as j,X as C,Xb as N,Y as g,Ya as b,Yb as A,Za as l,_a as f,ac as B,fb as k,i as w,ja as a,ka as u,p as L,pb as E,qb as T,tb as $,va as p,xa as d}from"./chunk-5BBGCJT5.js";import{f as ae}from"./chunk-6DTZ7UCQ.js";var re=ae(me());var se=(()=>{let i=class i{transform(n){let s=re.getName(n,"en");return s||null}};i.\u0275fac=function(s){return new(s||i)},i.\u0275pipe=D({name:"country",type:i,pure:!0,standalone:!0});let e=i;return e})();function pe(e,i){if(e&1&&c(0,"p-sortIcon",16),e&2){let t=m().$implicit;d("field",t.field)}}function _e(e,i){if(e&1&&(r(0,"th",14),p(1,pe,1,1,"p-sortIcon",15),l(2),o()),e&2){let t=i.$implicit,n=i.index;d("pSortableColumn",t.field)("pSortableColumnDisabled",n!==0),a(),d("ngIf",t.field==="name"),a(),h(" ",t.header," ")}}function de(e,i){if(e&1&&(r(0,"tr"),p(1,_e,3,4,"th",13),r(2,"th"),l(3,"Actions"),o()()),e&2){let t=i.$implicit;a(),d("ngForOf",t)}}function ue(e,i){e&1&&c(0,"p-tag",20)}function fe(e,i){e&1&&c(0,"p-tag",21)}function Ce(e,i){if(e&1&&p(0,ue,1,0,"p-tag",20)(1,fe,1,0,"p-tag",21),e&2){let t=m().$implicit,n=m().$implicit;x(n[t.field]?0:1)}}function ge(e,i){if(e&1&&(l(0),E(1,"country")),e&2){let t=m().$implicit,n=m().$implicit;h(" ",T(1,1,n[t.field])," ")}}function xe(e,i){if(e&1&&l(0),e&2){let t=m().$implicit,n=m().$implicit;h(" ",n[t.field]," ")}}function ve(e,i){if(e&1&&(r(0,"td"),p(1,Ce,2,1)(2,ge,2,3)(3,xe,1,1),o()),e&2){let t=i.$implicit;a(),x(t.field==="isAdmin"?1:t.field==="country"?2:3)}}function Se(e,i){if(e&1){let t=S();r(0,"tr"),p(1,ve,4,1,"td",17),r(2,"td")(3,"p-button",18),v("click",function(){let s=C(t).$implicit,_=m(3);return g(_.onDeleteUser(s.id))}),o(),c(4,"p-button",19),o()()}if(e&2){let t=i.$implicit,n=i.columns;a(),d("ngForOf",n),a(3),U("routerLink","/users/form/",t.id,"")}}function be(e,i){if(e&1&&(r(0,"p-table",9),p(1,de,4,1,"ng-template",11)(2,Se,5,3,"ng-template",12),o()),e&2){let t=m(2);d("columns",t.cols)("value",t.users)}}function he(e,i){e&1&&c(0,"p-tag",20)}function ye(e,i){e&1&&c(0,"p-tag",21)}function Ue(e,i){if(e&1){let t=S();r(0,"li")(1,"div",22)(2,"div",23)(3,"p-button",18),v("click",function(){let s=C(t).$implicit,_=m(3);return g(_.onDeleteUser(s.id))}),o(),c(4,"p-button",19),o()(),r(5,"div",24)(6,"div",25)(7,"div",26)(8,"span"),l(9,"Name"),o(),r(10,"p"),l(11),o()(),r(12,"div",27)(13,"span"),l(14,"Email"),o(),r(15,"p"),l(16),o()()(),r(17,"div",28)(18,"div",29)(19,"span"),l(20,"Admin"),o(),p(21,he,1,0,"p-tag",20)(22,ye,1,0,"p-tag",21),o(),r(23,"div",30)(24,"span"),l(25,"Country"),o(),r(26,"p"),l(27),E(28,"country"),o()()()()()}if(e&2){let t=i.$implicit;a(4),U("routerLink","/users/form/",t.id,""),a(7),f(t.name),a(5),f(t.email),a(5),x(t.isAdmin?21:22),a(6),f(T(28,6,t.country))}}function Ee(e,i){if(e&1&&(r(0,"div",10)(1,"ul"),p(2,Ue,29,8,"li",17),o()()),e&2){let t=m(2);a(2),d("ngForOf",t.users)}}function Te(e,i){if(e&1&&(r(0,"section",4)(1,"div",5)(2,"h1"),l(3,"Users"),o(),r(4,"p"),l(5,"List of all users"),o()(),r(6,"div",6)(7,"button",7),c(8,"i",8),r(9,"span"),l(10,"New"),o()()(),p(11,be,3,2,"p-table",9)(12,Ee,3,1,"div",10),o()),e&2){let t=m();a(11),x(t.isDesktop?11:12)}}function we(e,i){e&1&&(r(0,"div",31)(1,"p"),c(2,"i",32),o()())}function Le(e,i){if(e&1){let t=S();r(0,"div",33)(1,"div",34),c(2,"i",35),o(),r(3,"span",36),l(4),o(),r(5,"p",37),l(6),o(),r(7,"div",38)(8,"button",39),v("click",function(){C(t),m();let s=b(5);return g(s.accept())}),o(),r(9,"button",40),v("click",function(){C(t),m();let s=b(5);return g(s.reject())}),o()()()}if(e&2){let t=i.$implicit;a(4),f(t.header),a(2),f(t.message)}}var Ke=(()=>{let i=class i{constructor(n,s,_,y,le){this.usersService=n,this.confirmationService=s,this.messageService=_,this.router=y,this.viewportSizeService=le,this.cols=[{field:"name",header:"Name"},{field:"email",header:"Email"},{field:"isAdmin",header:"Admin"},{field:"country",header:"Country"}]}ngOnInit(){this._observeViewportSize(),this.getUsers(),this.listenUrlChanges()}_observeViewportSize(){this.viewportSizeService.viewportWidth$.pipe(w(n=>n>=1025)).subscribe(n=>{this.isDesktop=n})}getUsers(){this.usersService.getUsers().subscribe({next:n=>{this.users=n},error:n=>{console.error("Cannot get users",n)}})}onDeleteUser(n){this.confirmationService.confirm({header:"Delete User",message:"Are you sure you want to delete this User?",accept:()=>{this.usersService.deleteUser(n).subscribe({next:s=>{this.users=this.users.filter(_=>_.id!==s.id),this.messageService.add({severity:"success",summary:"Success",detail:`The user "${s.name}" is deleted successfully!`})},error:s=>{console.error("Cannot delete user",s)}})},reject:()=>{}})}listenUrlChanges(){this.urlChangesSubscription=this.router.events.pipe(L(n=>n instanceof O)).subscribe({next:()=>{this.getUsers()},error:n=>{console.error("Cannot get url changes!",n)}})}ngOnDestroy(){this.urlChangesSubscription?.unsubscribe()}};i.\u0275fac=function(s){return new(s||i)(u(z),u(P),u(q),u(N),u(R))},i.\u0275cmp=I({type:i,selectors:[["admin-users-list"]],standalone:!0,features:[k],decls:8,vars:2,consts:[["loader",""],["cd",""],["class","users-page",4,"ngIf","ngIfElse"],["pTemplate","headless"],[1,"users-page"],[1,"name-page"],[1,"btn-container"],["routerLink","/users/form",1,"btn-create-edit-user"],[1,"pi","pi-plus"],[1,"p-table",3,"columns","value"],[1,"users-list-tablet-mobile"],["pTemplate","header"],["pTemplate","body"],[3,"pSortableColumn","pSortableColumnDisabled",4,"ngFor","ngForOf"],[3,"pSortableColumn","pSortableColumnDisabled"],[3,"field",4,"ngIf"],[3,"field"],[4,"ngFor","ngForOf"],["styleClass","p-button-trash","icon","pi pi-trash",3,"click"],["styleClass","p-button-pencil","icon","pi pi-pencil",3,"routerLink"],["styleClass","p-mr-2","icon","pi pi-check","severity","success"],["styleClass","p-mr-2","icon","pi pi-times","severity","danger"],[1,"header"],[1,"actions"],[1,"body"],[1,"row-1"],[1,"field","name"],[1,"field","email"],[1,"row-2"],[1,"field","admin"],[1,"field","country"],[1,"loader-container"],[1,"pi","pi-spin","pi-spinner"],[1,"confirm-modal","flex","flex-column","align-items-center","p-5","border-round"],[1,"icon","border-circle","inline-flex","justify-content-center","align-items-center","h-6rem","w-6rem","-mt-8"],[1,"pi","pi-question","text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","align-items-center","gap-2","mt-4"],["pButton","","label","Save",1,"w-8rem",3,"click"],["pButton","","label","Cancel",1,"p-button-outlined","w-8rem",3,"click"]],template:function(s,_){if(s&1&&(p(0,Te,13,1,"section",2)(1,we,3,0,"ng-template",null,0,$),c(3,"p-toast"),r(4,"p-confirmDialog",null,1),p(6,Le,10,2,"ng-template",3),o(),c(7,"router-outlet")),s&2){let y=b(2);d("ngIf",_.users&&_.isDesktop!==void 0)("ngIfElse",y)}},dependencies:[M,V,F,A,B,j,H,G,W,Q,J,K,ie,Z,ee,te,Y,X,oe,ne,se]});let e=i;return e})();export{Ke as UsersListComponent};
