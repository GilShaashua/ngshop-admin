import{f as F}from"./chunk-PHBXVD5W.js";import{a as Fe}from"./chunk-RQ7C336G.js";import{a as we}from"./chunk-LYDSVJGF.js";import{a as ft}from"./chunk-3NDF3D2D.js";import{p as Te}from"./chunk-6MNVWFTH.js";import{a as Ve,b as De,g as Pe,h as qe}from"./chunk-TS3NKEIW.js";import{$a as Oe,$b as le,Aa as Y,Ab as pt,Ac as _t,Bc as yt,C as Q,Ca as o,Cc as Ct,Da as n,E as G,Ea as c,Ec as bt,Fc as St,Gc as je,Ha as it,I as P,Ia as H,J as E,Ja as S,Jb as ee,K as X,Ka as g,Kc as B,La as rt,Lb as te,Lc as xt,Ma as nt,Mb as ie,O as _,Oc as pe,P as y,Pc as he,Qa as Ue,Qb as ht,Ra as U,Sa as T,Sb as re,Ta as k,Tb as ne,Ua as $,Ub as h,Va as l,Wa as q,Wb as oe,Xa as O,Xb as ae,Y as Ce,Za as K,Zb as se,_a as z,_b as gt,aa as _e,ab as C,ac as me,bb as Ee,bc as de,ca as be,cb as ot,cc as ke,dc as ce,ea as Je,g as D,gc as vt,hc as Ne,i as We,ia as s,ib as at,ja as f,jb as st,jc as Be,k as R,ka as Se,lc as ze,mb as W,na as L,ob as N,pa as et,pb as Ie,qb as lt,ra as xe,rb as M,sb as mt,ta as p,tb as V,tc as Me,ua as x,ub as J,va as d,vb as dt,wa as tt,xb as ct,ya as He,yb as I,za as Z,zb as ut,zc as ue}from"./chunk-CX4LBOHC.js";import{a as Re,f as A}from"./chunk-CWTPBX7D.js";function Pt(t,m){if(t&1&&(o(0,"section",1)(1,"div",2)(2,"h1"),l(3,"Dashboard"),n(),o(4,"h4"),l(5,"Latest updates"),n()(),o(6,"div",3)(7,"article",4)(8,"div",5),c(9,"i",6),o(10,"h3"),l(11,"Orders"),n()(),o(12,"div",7)(13,"p"),l(14),n()()(),o(15,"article",8)(16,"div",5),c(17,"i",9),o(18,"h3"),l(19,"Users"),n()(),o(20,"div",7)(21,"p"),l(22),n()()(),o(23,"article",10)(24,"div",5),c(25,"i",11),o(26,"h3"),l(27,"Products"),n()(),o(28,"div",7)(29,"p"),l(30),n()()(),o(31,"article",12)(32,"div",5),c(33,"i",13),o(34,"h3"),l(35,"Total Sales"),n()(),o(36,"div",7)(37,"p"),l(38),at(39,"currency"),n()()()()()),t&2){let e=g();s(14),q(e.statistics[0].ordersCount),s(8),q(e.statistics[1].usersCount),s(8),q(e.statistics[2].productsCount),s(8),q(st(39,4,e.statistics[3].totalSales))}}var Et=(()=>{let m=class m{constructor(i,r,a){this.ordersService=i,this.usersService=r,this.productsService=a}ngOnInit(){We([this.ordersService.getOrdersCount(),this.usersService.getUsersCount(),this.productsService.getProductsCount(),this.ordersService.getTotalSales()]).subscribe({next:i=>{this.statistics=i}})}};m.\u0275fac=function(r){return new(r||m)(f(ft),f(Te),f(Fe))},m.\u0275cmp=E({type:m,selectors:[["admin-dashboard"]],standalone:!0,features:[z],decls:1,vars:1,consts:[["class","dashboard-page",4,"ngIf"],[1,"dashboard-page"],[1,"header"],[1,"summary"],[1,"orders"],[1,"icon-heading"],[1,"pi","pi-shopping-cart"],[1,"value"],[1,"users"],[1,"pi","pi-user"],[1,"products"],[1,"pi","pi-th-large"],[1,"total-sales"],[1,"pi","pi-dollar"]],template:function(r,a){r&1&&p(0,Pt,40,6,"section",0),r&2&&d("ngIf",a.statistics)},dependencies:[I,V,ct]});let t=m;return t})();var Lt=["input"],At=(t,m,e)=>({"p-inputswitch p-component":!0,"p-inputswitch-checked":t,"p-disabled":m,"p-focus":e}),Rt={provide:re,useExisting:Q(()=>ye),multi:!0},ye=(()=>{class t{cd;style;styleClass;tabindex;inputId;name;disabled;readonly;trueValue=!0;falseValue=!1;ariaLabel;ariaLabelledBy;autofocus;onChange=new L;input;modelValue=!1;focused=!1;onModelChange=()=>{};onModelTouched=()=>{};constructor(e){this.cd=e}onClick(e){!this.disabled&&!this.readonly&&(this.modelValue=this.checked()?this.falseValue:this.trueValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:e,checked:this.modelValue}),e.preventDefault(),this.input.nativeElement.focus())}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}writeValue(e){this.modelValue=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}static \u0275fac=function(i){return new(i||t)(f(Se))};static \u0275cmp=E({type:t,selectors:[["p-inputSwitch"]],viewQuery:function(i,r){if(i&1&&U(Lt,5),i&2){let a;T(a=k())&&(r.input=a.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:[P.HasDecoratorInputTransform,"tabindex","tabindex",Ie],inputId:"inputId",name:"name",disabled:[P.HasDecoratorInputTransform,"disabled","disabled",N],readonly:[P.HasDecoratorInputTransform,"readonly","readonly",N],trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",autofocus:[P.HasDecoratorInputTransform,"autofocus","autofocus",N]},outputs:{onChange:"onChange"},features:[K([Rt]),xe],decls:5,vars:23,consts:[[3,"ngClass","ngStyle","click"],[1,"p-hidden-accessible"],["type","checkbox","role","switch","pAutoFocus","",3,"checked","disabled","autofocus","focus","blur"],["input",""],[1,"p-inputswitch-slider"]],template:function(i,r){i&1&&(o(0,"div",0),S("click",function(u){return r.onClick(u)}),o(1,"div",1)(2,"input",2,3),S("focus",function(){return r.onFocus()})("blur",function(){return r.onBlur()}),n()(),c(4,"span",4),n()),i&2&&(Z(r.styleClass),d("ngClass",ot(19,At,r.checked(),r.disabled,r.focused))("ngStyle",r.style),x("data-pc-name","inputswitch")("data-pc-section","root"),s(),x("data-pc-section","hiddenInputWrapper")("data-p-hidden-accessible",!0),s(),d("checked",r.checked())("disabled",r.disabled)("autofocus",r.autofocus),x("id",r.inputId)("aria-checked",r.checked())("aria-labelledby",r.ariaLabelledBy)("aria-label",r.ariaLabel)("name",r.name)("tabindex",r.tabindex)("data-pc-section","hiddenInput"),s(2),x("data-pc-section","slider"))},dependencies:[M,J,Ve],styles:[`@layer primeng{.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;inset:0;border:1px solid transparent}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}}
`],encapsulation:2,changeDetection:0})}return t})(),Le=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=X({type:t});static \u0275inj=G({imports:[I,De]})}return t})();function Ht(t,m){t&1&&it(0)}function Ut(t,m){if(t&1&&(o(0,"div",3),nt(1),p(2,Ht,1,0,"ng-container",4),n()),t&2){let e=g();s(2),d("ngTemplateOutlet",e.headerTemplate)}}function Ot(t,m){t&1&&(o(0,"div",3)(1,"span",5)(2,"select",6)(3,"option",7),l(4,"Heading"),n(),o(5,"option",8),l(6,"Subheading"),n(),o(7,"option",9),l(8,"Normal"),n()(),o(9,"select",10)(10,"option",9),l(11,"Sans Serif"),n(),o(12,"option",11),l(13,"Serif"),n(),o(14,"option",12),l(15,"Monospace"),n()()(),o(16,"span",5),c(17,"button",13)(18,"button",14)(19,"button",15),n(),o(20,"span",5),c(21,"select",16)(22,"select",17),n(),o(23,"span",5),c(24,"button",18)(25,"button",19),o(26,"select",20),c(27,"option",9),o(28,"option",21),l(29,"center"),n(),o(30,"option",22),l(31,"right"),n(),o(32,"option",23),l(33,"justify"),n()()(),o(34,"span",5),c(35,"button",24)(36,"button",25)(37,"button",26),n(),o(38,"span",5),c(39,"button",27),n()())}var Nt=[[["p-header"]]],Bt=["p-header"],zt={provide:re,useExisting:Q(()=>Ge),multi:!0},Ge=(()=>{class t{el;platformId;style;styleClass;placeholder;formats;modules;bounds;scrollingContainer;debug;get readonly(){return this._readonly}set readonly(e){this._readonly=e,this.quill&&(this._readonly?this.quill.disable():this.quill.enable())}onInit=new L;onTextChange=new L;onSelectionChange=new L;templates;toolbar;value;delayedCommand=null;_readonly=!1;onModelChange=()=>{};onModelTouched=()=>{};quill;dynamicQuill;headerTemplate;get isAttachedQuillEditorToDOM(){return this.quillElements?.editorElement?.isConnected}quillElements;constructor(e,i){this.el=e,this.platformId=i,et(()=>{this.initQuillElements(),this.isAttachedQuillEditorToDOM&&this.initQuillEditor()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break}})}writeValue(e){if(this.value=e,this.quill)if(e){let i=()=>{this.quill.setContents(this.quill.clipboard.convert(this.value))};this.isAttachedQuillEditorToDOM?i():this.delayedCommand=i}else{let i=()=>{this.quill.setText("")};this.isAttachedQuillEditorToDOM?i():this.delayedCommand=i}}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}getQuill(){return this.quill}initQuillEditor(){pt(this.platformId)||(this.dynamicQuill?this.createQuillEditor():import("./chunk-NJMSQJMF.js").then(e=>{this.dynamicQuill=e.default,this.createQuillEditor()}).catch(e=>console.error(e.message)))}createQuillEditor(){this.initQuillElements();let{toolbarElement:e,editorElement:i}=this.quillElements,r={toolbar:e},a=this.modules?Re(Re({},r),this.modules):r;this.quill=new this.dynamicQuill(i,{modules:a,placeholder:this.placeholder,readOnly:this.readonly,theme:"snow",formats:this.formats,bounds:this.bounds,debug:this.debug,scrollingContainer:this.scrollingContainer}),this.value&&this.quill.setContents(this.quill.clipboard.convert(this.value)),this.quill.on("text-change",(u,v,b)=>{if(b==="user"){let w=B.findSingle(i,".ql-editor").innerHTML,Ae=this.quill.getText().trim();w==="<p><br></p>"&&(w=null),this.onTextChange.emit({htmlValue:w,textValue:Ae,delta:u,source:b}),this.onModelChange(w),this.onModelTouched()}}),this.quill.on("selection-change",(u,v,b)=>{this.onSelectionChange.emit({range:u,oldRange:v,source:b})}),this.onInit.emit({editor:this.quill})}initQuillElements(){this.quillElements||(this.quillElements={editorElement:B.findSingle(this.el.nativeElement,"div.p-editor-content"),toolbarElement:B.findSingle(this.el.nativeElement,"div.p-editor-toolbar")})}static \u0275fac=function(i){return new(i||t)(f(be),f(Ce))};static \u0275cmp=E({type:t,selectors:[["p-editor"]],contentQueries:function(i,r,a){if(i&1&&(Ue(a,Ct,5),Ue(a,bt,4)),i&2){let u;T(u=k())&&(r.toolbar=u.first),T(u=k())&&(r.templates=u)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",placeholder:"placeholder",formats:"formats",modules:"modules",bounds:"bounds",scrollingContainer:"scrollingContainer",debug:"debug",readonly:"readonly"},outputs:{onInit:"onInit",onTextChange:"onTextChange",onSelectionChange:"onSelectionChange"},features:[K([zt])],ngContentSelectors:Bt,decls:4,vars:6,consts:[[3,"ngClass"],["class","p-editor-toolbar",4,"ngIf"],[1,"p-editor-content",3,"ngStyle"],[1,"p-editor-toolbar"],[4,"ngTemplateOutlet"],[1,"ql-formats"],[1,"ql-header"],["value","1"],["value","2"],["selected",""],[1,"ql-font"],["value","serif"],["value","monospace"],["aria-label","Bold","type","button",1,"ql-bold"],["aria-label","Italic","type","button",1,"ql-italic"],["aria-label","Underline","type","button",1,"ql-underline"],[1,"ql-color"],[1,"ql-background"],["value","ordered","aria-label","Ordered List","type","button",1,"ql-list"],["value","bullet","aria-label","Unordered List","type","button",1,"ql-list"],[1,"ql-align"],["value","center"],["value","right"],["value","justify"],["aria-label","Insert Link","type","button",1,"ql-link"],["aria-label","Insert Image","type","button",1,"ql-image"],["aria-label","Insert Code Block","type","button",1,"ql-code-block"],["aria-label","Remove Styles","type","button",1,"ql-clean"]],template:function(i,r){i&1&&(rt(Nt),o(0,"div",0),p(1,Ut,3,1,"div",1)(2,Ot,40,0,"div",1),c(3,"div",2),n()),i&2&&(Z(r.styleClass),d("ngClass","p-editor-container"),s(),d("ngIf",r.toolbar||r.headerTemplate),s(),d("ngIf",!r.toolbar&&!r.headerTemplate),s(),d("ngStyle",r.style))},dependencies:[M,V,dt,J],styles:[`.p-editor-container .p-editor-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options .ql-picker-item{width:auto;height:auto}
`],encapsulation:2,changeDetection:0})}return t})(),wt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=X({type:t});static \u0275inj=G({imports:[I,St]})}return t})();function Gt(t,m){t&1&&(o(0,"small",52),l(1,"Name is required!"),n())}function Xt(t,m){t&1&&(o(0,"small",52),l(1,"Minimum 3 characters!"),n())}function Zt(t,m){t&1&&(o(0,"small",52),l(1,"Brand is required!"),n())}function Yt(t,m){t&1&&(o(0,"small",52),l(1,"Minimum 5 characters!"),n())}function $t(t,m){t&1&&(o(0,"small",52),l(1,"Price is requried!"),n())}function Kt(t,m){t&1&&(o(0,"small",52),l(1,"Category is required!"),n())}function Wt(t,m){t&1&&(o(0,"small",52),l(1,"Minimum 3 characters!"),n())}function Jt(t,m){t&1&&(o(0,"small",52),l(1,"Stock is required!"),n())}function ei(t,m){t&1&&(o(0,"small",52),l(1,"Rating is required!"),n())}function ti(t,m){t&1&&(o(0,"small",52),l(1,"Reviews is required!"),n())}function ii(t,m){if(t&1&&(o(0,"label",38),c(1,"img",53),n()),t&2){let e=g(2);s(),d("src",e.controlsForm.image.value,_e)}}function ri(t,m){if(t&1&&(o(0,"label",38),c(1,"img",53),n()),t&2){let e=g(2);s(),d("src",e.imageSelectedUrl,_e)}}function ni(t,m){t&1&&(o(0,"label",38),c(1,"i",54),n())}function oi(t,m){t&1&&(o(0,"small",52),l(1,"Image is required!"),n())}function ai(t,m){if(t&1&&c(0,"img",56),t&2){let e=m.$implicit;d("src",e,_e)}}function si(t,m){if(t&1&&(o(0,"label",42),p(1,ai,1,1,"img",55),n()),t&2){let e=g(2);s(),d("ngForOf",e.controlsForm.images.value)}}function li(t,m){if(t&1&&c(0,"img",56),t&2){let e=m.$implicit;d("src",e,_e)}}function mi(t,m){if(t&1&&(o(0,"label",42),p(1,li,1,1,"img",55),n()),t&2){let e=g(2);s(),d("ngForOf",e.gallerySelectedUrls)}}function di(t,m){t&1&&(o(0,"label",42),c(1,"i",54),n())}function ci(t,m){t&1&&(o(0,"small",52),l(1,"Description is required!"),n())}function ui(t,m){t&1&&(o(0,"small",52),l(1,"Minimum 20 characters!"),n())}function pi(t,m){t&1&&(o(0,"small",52),l(1,"Description is required!"),n())}function hi(t,m){t&1&&(o(0,"small",52),l(1,"Minimum 40 characters!"),n())}var ve=t=>({submitted:t}),Ft=()=>({height:"220px"});function fi(t,m){if(t&1){let e=H();o(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),l(4),n(),o(5,"p"),l(6),n()(),o(7,"div",5)(8,"button",6),S("click",function(){_(e);let r=g();return y(r.onSubmitForm())}),c(9,"i"),o(10,"span"),l(11),n()(),o(12,"button",7),c(13,"i",8),o(14,"span"),l(15,"Cancel"),n()()(),o(16,"form",9)(17,"div",10)(18,"div",11)(19,"label",12),l(20,"Name"),n(),c(21,"input",13),p(22,Gt,2,0,"small",14)(23,Xt,2,0,"small",14),n(),o(24,"div",15)(25,"label",16),l(26,"Brand"),n(),c(27,"input",17),p(28,Zt,2,0,"small",14)(29,Yt,2,0,"small",14),n(),o(30,"div",18)(31,"label",19),l(32,"Price"),n(),c(33,"input",20),p(34,$t,2,0,"small",14),n(),o(35,"div",21)(36,"label",22),l(37,"Category"),n(),c(38,"p-dropdown",23),p(39,Kt,2,0,"small",14)(40,Wt,2,0,"small",14),n(),o(41,"div",24)(42,"label",25),l(43,"Stock"),n(),c(44,"input",26),p(45,Jt,2,0,"small",14),n(),o(46,"div",27)(47,"label",28),l(48,"Rating"),n(),c(49,"input",29),p(50,ei,2,0,"small",14),n(),o(51,"div",30)(52,"label",31),l(53,"Reviews"),n(),c(54,"input",32),p(55,ti,2,0,"small",14),n(),o(56,"div",33)(57,"label",34),l(58,"Featured"),n(),c(59,"p-inputSwitch",35),n()(),o(60,"div",36)(61,"div",37)(62,"label",38),l(63,"Main image"),n(),o(64,"input",39),S("change",function(r){_(e);let a=g();return y(a.onImageUpload(r))}),n(),p(65,ii,2,1,"label",40)(66,ri,2,1,"label",40)(67,ni,2,0,"label",40)(68,oi,2,0,"small",14),n(),o(69,"div",41)(70,"label",42),l(71,"Gallery"),n(),o(72,"input",43),S("change",function(r){_(e);let a=g();return y(a.onGalleryUpload(r))}),n(),p(73,si,2,1,"label",44)(74,mi,2,1,"label",44)(75,di,2,0,"label",44),n()(),o(76,"div",45)(77,"div",46)(78,"label",47),l(79,"Description"),n(),c(80,"p-editor",48),p(81,ci,2,0,"small",14)(82,ui,2,0,"small",14),n(),o(83,"div",49)(84,"label",50),l(85,"Rich Description"),n(),c(86,"p-editor",51),p(87,pi,2,0,"small",14)(88,hi,2,0,"small",14),n()()()()()}if(t&2){let e=g();s(4),O("",e.productId?"Edit":"Add"," Product"),s(2),O("You can ",e.productId?"edit":"add"," products here"),s(3),Y("pi ",e.productId?"pi-cloud-upload":"pi-plus",""),s(2),q(e.productId?"Edit":"Add"),s(5),d("formGroup",e.form),s(5),d("ngClass",C(40,ve,e.isSubmitted)),s(),d("ngIf",e.controlsForm.name.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.name.hasError("minlength")&&e.isSubmitted),s(4),d("ngClass",C(42,ve,e.isSubmitted)),s(),d("ngIf",e.controlsForm.brand.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.brand.hasError("minlength")&&e.isSubmitted),s(4),d("ngClass",C(44,ve,e.isSubmitted)),s(),d("ngIf",e.controlsForm.price.hasError("required")&&e.isSubmitted),s(4),d("options",e.categories)("filter",!0),s(),d("ngIf",e.controlsForm.category.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.category.hasError("minlength")&&e.isSubmitted),s(4),d("ngClass",C(46,ve,e.isSubmitted)),s(),d("ngIf",e.controlsForm.countInStock.hasError("required")&&e.isSubmitted),s(4),d("ngClass",C(48,ve,e.isSubmitted)),s(),d("ngIf",e.controlsForm.rating.hasError("required")&&e.isSubmitted),s(4),d("ngClass",C(50,ve,e.isSubmitted)),s(),d("ngIf",e.controlsForm.numReviews.hasError("required")&&e.isSubmitted),s(10),d("ngIf",e.controlsForm.image.value&&e.isImageFormControlString()),s(),d("ngIf",e.imageSelectedUrl),s(),d("ngIf",!e.controlsForm.image.value),s(),d("ngIf",e.controlsForm.image.hasError("required")&&e.isSubmitted),s(5),d("ngIf",e.controlsForm.images.value.length&&e.isImagesFormControlArrayOfStrings()),s(),d("ngIf",e.gallerySelectedUrls.length),s(),d("ngIf",!e.controlsForm.images.value.length),s(5),He(Oe(52,Ft)),s(),d("ngIf",e.controlsForm.description.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.description.hasError("minlength")&&e.isSubmitted),s(4),He(Oe(53,Ft)),s(),d("ngIf",e.controlsForm.richDescription.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.richDescription.hasError("minlength")&&e.isSubmitted)}}function gi(t,m){t&1&&(o(0,"div",57),c(1,"i",58),n())}var Ze=(()=>{let m=class m{constructor(i,r,a,u,v,b){this.formBuilder=i,this.productsService=r,this.messageService=a,this.router=u,this.route=v,this.categoriesService=b,this.form=this.formBuilder.group({id:[""],name:["",[h.required,h.minLength(3)]],description:["",[h.required,h.minLength(20)]],richDescription:["",[h.required,h.minLength(40)]],image:["",[h.required]],images:[[]],brand:["",[h.required,h.minLength(5)]],price:[0,[h.required]],category:["",[h.required,h.minLength(3)]],countInStock:[0,[h.required]],rating:[0,[h.required]],numReviews:[0,[h.required]],isFeatured:[!1]}),this.productId="",this.isCmpInitialized=!1,this.isSubmitted=!1,this.imageSelectedUrl=null,this.gallerySelectedUrls=[],this.formImage="",this.isGalleryChanged=!1}ngOnInit(){this._checkParams(),this._getCategories()}onSubmitForm(){if(this.form.pristine&&this.formImage===this.form.value.image&&this.form.value.images instanceof Array)return this.productId?this.messageService.add({severity:"error",summary:"Error",detail:"Edit atleast 1 field!"}):this.messageService.add({severity:"error",summary:"Error",detail:"Fill the fields first!"});if(this.isSubmitted=!0,this.form.invalid)return;let i=new FormData;Object.keys(this.form.value).forEach(u=>{u==="category"?i.append(u,this.form.value[u].id):u==="images"?i.append(u,""):i.append(u,this.form.value[u])});let a=new FormData;if(this.form.value.images instanceof FileList)for(let u=0;u<this.form.value.images.length;u++){let v=this.form.value.images[u];a.append("images",v)}this.productId?this._editProduct(i,a):this._addProduct(i,a)}isInputElement(i){return i instanceof HTMLInputElement}onImageUpload(i){if(this.imageSelectedUrl=null,this.form.patchValue({image:""}),i.target&&this.isInputElement(i.target)){let r=i.target.files[0];if(r){let a=new FileReader;a.onload=()=>{this.form.patchValue({image:r}),this.form.get("image")?.updateValueAndValidity(),a.result&&(this.imageSelectedUrl=a.result)},a.readAsDataURL(r)}}}onGalleryUpload(i){if(i.target&&this.isInputElement(i.target)&&i.target.files?.length){let r=i.target.files;if(this.form.patchValue({images:r}),r)for(let a=0;a<r.length;a++){let u=r[a];if(u){let v=new FileReader;v.onload=()=>{v.result&&this.gallerySelectedUrls.push(v.result)},v.readAsDataURL(u)}}}}_checkParams(){this.paramsSubscription=this.route.params.subscribe(i=>{i.productId?this.productsService.getProductById(i.productId).subscribe({next:r=>{this.formImage=r.image,this.productId=r.id,this.form.patchValue(r),this.form.updateValueAndValidity(),this.isCmpInitialized=!0},error:r=>{console.error("Cannot get product",r)}}):this.isCmpInitialized=!0})}_getCategories(){this.categoriesService.getCategories().subscribe({next:i=>{this.categories=i},error:i=>{console.error("Cannot get categories",i)}})}_addProduct(i,r){this.productsService.addProduct(i).subscribe({next:a=>A(this,null,function*(){try{yield D(this.productsService.editProductGallery(r,a.id)),this.messageService.add({severity:"success",summary:"Success",detail:`The product "${a.name}" is created successfully!`})}catch(u){console.error("Cannot update gallery",u)}yield D(R(2e3)),this.router.navigateByUrl("/products")}),error:a=>{this.messageService.add({severity:"error",summary:"Error",detail:"The product cannot be created!"}),console.error("The product cannot be created!",a)}})}_editProduct(i,r){this.productsService.editProduct(i).subscribe({next:a=>A(this,null,function*(){try{this.form.value.images instanceof FileList&&(yield D(this.productsService.editProductGallery(r,a.id))),this.messageService.add({severity:"success",summary:"Success",detail:`The product "${a.name}" is edited successfully!`})}catch(u){console.error("Cannot update gallery",u)}yield D(R(2e3)),this.router.navigateByUrl("/products")}),error:a=>{this.messageService.add({severity:"error",summary:"Error",detail:"The product cannot be edited!"}),console.error("Cannot edit product",a)}})}isImageFormControlString(){return typeof this.controlsForm.image.value=="string"}isImagesFormControlArrayOfStrings(){let i=this.controlsForm.images.value;return Array.isArray(i)?i.every(r=>typeof r=="string"):!1}get controlsForm(){return this.form.controls}ngOnDestroy(){this.paramsSubscription?.unsubscribe()}};m.\u0275fac=function(r){return new(r||m)(f(de),f(Fe),f(ue),f(te),f(ee),f(we))},m.\u0275cmp=E({type:m,selectors:[["admin-product-form"]],standalone:!0,features:[z],decls:4,vars:2,consts:[["class","products-form-modal",4,"ngIf","ngIfElse"],["loader",""],[1,"products-form-modal"],[1,"products-form-container"],[1,"products-form-heading"],[1,"btns-container"],[1,"btn-create",3,"click"],["routerLink","/products",1,"btn-cancel"],[1,"pi","pi-arrow-circle-left"],[3,"formGroup"],[1,"inputs-container"],[1,"name-input"],["for","name"],["formControlName","name","type","text","name","name","id","name",3,"ngClass"],["class","p-error",4,"ngIf"],[1,"brand-input"],["for","brand"],["formControlName","brand","type","text","name","brand","id","brand",3,"ngClass"],[1,"price-input"],["for","price"],["formControlName","price","type","number","name","price","id","price",3,"ngClass"],[1,"category-input"],["for","category"],["formControlName","category","optionLabel","name","filterBy","name","placeholder","Select a Category",3,"options","filter"],[1,"stock-input"],["for","stock"],["formControlName","countInStock","type","number","name","stock","id","stock",3,"ngClass"],[1,"rating-input"],["for","rating"],["formControlName","rating","type","number","name","rating","id","rating",3,"ngClass"],[1,"reviews-input"],["for","reviews"],["formControlName","numReviews","type","number","name","reviews","id","reviews",3,"ngClass"],[1,"featured-input"],["for","featured"],["formControlName","isFeatured","inputId","featured"],[1,"images-container"],[1,"main-image"],["for","main-image"],["type","file","name","main-image","id","main-image","accept","image/*",3,"change"],["for","main-image",4,"ngIf"],[1,"gallery-container"],["for","gallery"],["type","file","name","gallery","id","gallery","multiple","","accept","image/*",3,"change"],["for","gallery",4,"ngIf"],[1,"descriptions-container"],[1,"description-input"],["for","description"],["formControlName","description"],[1,"rich-description-input"],["for","rich-description"],["formControlName","richDescription"],[1,"p-error"],["alt","main image",3,"src"],[1,"pi","pi-image",2,"font-size","40px"],["alt","gallery",3,"src",4,"ngFor","ngForOf"],["alt","gallery",3,"src"],[1,"loader"],[1,"pi","pi-spin","pi-spinner"]],template:function(r,a){if(r&1&&(p(0,fi,89,54,"div",0),c(1,"p-toast"),p(2,gi,2,0,"ng-template",null,1,W)),r&2){let u=$(3);d("ngIf",a.categories&&a.isCmpInitialized)("ngIfElse",u)}},dependencies:[I,M,mt,V,ke,se,ne,gt,oe,ae,ce,le,me,he,pe,ie,Le,ye,qe,Pe,wt,Ge]});let t=m;return t})();var vi=["container"],_i=["input"],yi=["colorSelector"],Ci=["colorHandle"],bi=["hue"],Si=["hueHandle"],xi=t=>({"p-disabled":t});function Ei(t,m){if(t&1){let e=H();o(0,"input",4,5),S("click",function(){_(e);let r=g();return y(r.onInputClick())})("keydown",function(r){_(e);let a=g();return y(a.onInputKeydown(r))})("focus",function(){_(e);let r=g();return y(r.onInputFocus())}),n()}if(t&2){let e=g();tt("background-color",e.inputBgColor),d("ngClass",C(9,xi,e.disabled))("disabled",e.disabled)("autofocus",e.autofocus),x("tabindex",e.tabindex)("id",e.inputId)("data-pc-section","input")("aria-label",e.ariaLabel)}}var Ii=(t,m)=>({"p-colorpicker-panel":!0,"p-colorpicker-overlay-panel":t,"p-disabled":m}),wi=(t,m)=>({showTransitionParams:t,hideTransitionParams:m}),Fi=t=>({value:"visible",params:t});function Ti(t,m){if(t&1){let e=H();o(0,"div",6),S("click",function(r){_(e);let a=g();return y(a.onOverlayClick(r))})("@overlayAnimation.start",function(r){_(e);let a=g();return y(a.onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){_(e);let a=g();return y(a.onOverlayAnimationEnd(r))}),o(1,"div",7)(2,"div",8,9),S("touchstart",function(r){_(e);let a=g();return y(a.onColorDragStart(r))})("touchmove",function(r){_(e);let a=g();return y(a.onDrag(r))})("touchend",function(){_(e);let r=g();return y(r.onDragEnd())})("mousedown",function(r){_(e);let a=g();return y(a.onColorMousedown(r))}),o(4,"div",10),c(5,"div",11,12),n()(),o(7,"div",13,14),S("mousedown",function(r){_(e);let a=g();return y(a.onHueMousedown(r))})("touchstart",function(r){_(e);let a=g();return y(a.onHueDragStart(r))})("touchmove",function(r){_(e);let a=g();return y(a.onDrag(r))})("touchend",function(){_(e);let r=g();return y(r.onDragEnd())}),c(9,"div",15,16),n()()()}if(t&2){let e=g();d("ngClass",Ee(10,Ii,!e.inline,e.disabled))("@overlayAnimation",C(16,Fi,Ee(13,wi,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",e.inline===!0),x("data-pc-section","panel"),s(),x("data-pc-section","content"),s(),x("data-pc-section","selector"),s(2),x("data-pc-section","color"),s(),x("data-pc-section","colorHandle"),s(2),x("data-pc-section","hue"),s(2),x("data-pc-section","hueHandle")}}var ki=(t,m)=>({"p-colorpicker p-component":!0,"p-colorpicker-overlay":t,"p-colorpicker-dragging":m}),Mi={provide:re,useExisting:Q(()=>Ye),multi:!0},Ye=(()=>{class t{document;platformId;el;renderer;cd;config;overlayService;style;styleClass;inline;format="hex";appendTo;disabled;tabindex;inputId;autoZIndex=!0;baseZIndex=0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";autofocus;onChange=new L;onShow=new L;onHide=new L;containerViewChild;inputViewChild;value={h:0,s:100,b:100};inputBgColor;shown;overlayVisible;defaultColor="ff0000";onModelChange=()=>{};onModelTouched=()=>{};documentClickListener;documentResizeListener;documentMousemoveListener;documentMouseupListener;documentHueMoveListener;scrollHandler;selfClick;colorDragging;hueDragging;overlay;colorSelectorViewChild;colorHandleViewChild;hueViewChild;hueHandleViewChild;window;constructor(e,i,r,a,u,v,b){this.document=e,this.platformId=i,this.el=r,this.renderer=a,this.cd=u,this.config=v,this.overlayService=b,this.window=this.document.defaultView}set colorSelector(e){this.colorSelectorViewChild=e}set colorHandle(e){this.colorHandleViewChild=e}set hue(e){this.hueViewChild=e}set hueHandle(e){this.hueHandleViewChild=e}get ariaLabel(){return this.config?.getTranslation(je.ARIA)[je.SELECT_COLOR]}onHueMousedown(e){this.disabled||(this.bindDocumentMousemoveListener(),this.bindDocumentMouseupListener(),this.hueDragging=!0,this.pickHue(e))}onHueDragStart(e){this.disabled||(this.hueDragging=!0,this.pickHue(e,e.changedTouches[0]))}onColorDragStart(e){this.disabled||(this.colorDragging=!0,this.pickColor(e,e.changedTouches[0]))}pickHue(e,i){let r=i?i.pageY:e.pageY,a=this.hueViewChild?.nativeElement.getBoundingClientRect().top+(this.document.defaultView.pageYOffset||this.document.documentElement.scrollTop||this.document.body.scrollTop||0);this.value=this.validateHSB({h:Math.floor(360*(150-Math.max(0,Math.min(150,r-a)))/150),s:this.value.s,b:this.value.b}),this.updateColorSelector(),this.updateUI(),this.updateModel(),this.onChange.emit({originalEvent:e,value:this.getValueToUpdate()})}onColorMousedown(e){this.disabled||(this.bindDocumentMousemoveListener(),this.bindDocumentMouseupListener(),this.colorDragging=!0,this.pickColor(e))}onDrag(e){this.colorDragging&&(this.pickColor(e,e.changedTouches[0]),e.preventDefault()),this.hueDragging&&(this.pickHue(e,e.changedTouches[0]),e.preventDefault())}onDragEnd(){this.colorDragging=!1,this.hueDragging=!1,this.unbindDocumentMousemoveListener(),this.unbindDocumentMouseupListener()}pickColor(e,i){let r=i?i.pageX:e.pageX,a=i?i.pageY:e.pageY,u=this.colorSelectorViewChild?.nativeElement.getBoundingClientRect(),v=u.top+(this.document.defaultView.pageYOffset||this.document.documentElement.scrollTop||this.document.body.scrollTop||0),b=u.left+this.document.body.scrollLeft,w=Math.floor(100*Math.max(0,Math.min(150,r-b))/150),Ae=Math.floor(100*(150-Math.max(0,Math.min(150,a-v)))/150);this.value=this.validateHSB({h:this.value.h,s:w,b:Ae}),this.updateUI(),this.updateModel(),this.onChange.emit({originalEvent:e,value:this.getValueToUpdate()})}getValueToUpdate(){let e;switch(this.format){case"hex":e="#"+this.HSBtoHEX(this.value);break;case"rgb":e=this.HSBtoRGB(this.value);break;case"hsb":e=this.value;break}return e}updateModel(){this.onModelChange(this.getValueToUpdate())}writeValue(e){if(e)switch(this.format){case"hex":this.value=this.HEXtoHSB(e);break;case"rgb":this.value=this.RGBtoHSB(e);break;case"hsb":this.value=e;break}else this.value=this.HEXtoHSB(this.defaultColor);this.updateColorSelector(),this.updateUI(),this.cd.markForCheck()}updateColorSelector(){if(this.colorSelectorViewChild){let e={};e.s=100,e.b=100,e.h=this.value.h,this.colorSelectorViewChild.nativeElement.style.backgroundColor="#"+this.HSBtoHEX(e)}}updateUI(){this.colorHandleViewChild&&this.hueHandleViewChild?.nativeElement&&(this.colorHandleViewChild.nativeElement.style.left=Math.floor(150*this.value.s/100)+"px",this.colorHandleViewChild.nativeElement.style.top=Math.floor(150*(100-this.value.b)/100)+"px",this.hueHandleViewChild.nativeElement.style.top=Math.floor(150-150*this.value.h/360)+"px"),this.inputBgColor="#"+this.HSBtoHEX(this.value)}onInputFocus(){this.onModelTouched()}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.inline||(this.overlay=e.element,this.appendOverlay(),this.autoZIndex&&Me.set("overlay",this.overlay,this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.updateColorSelector(),this.updateUI());break;case"void":this.onOverlayHide();break}}onOverlayAnimationEnd(e){switch(e.toState){case"visible":this.inline||this.onShow.emit({});break;case"void":this.autoZIndex&&Me.clear(e.element),this.onHide.emit({});break}}appendOverlay(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.overlay):B.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.overlay)}alignOverlay(){this.appendTo?B.absolutePosition(this.overlay,this.inputViewChild?.nativeElement):B.relativePosition(this.overlay,this.inputViewChild?.nativeElement)}hide(){this.overlayVisible=!1,this.cd.markForCheck()}onInputClick(){this.selfClick=!0,this.togglePanel()}togglePanel(){this.overlayVisible?this.hide():this.show()}onInputKeydown(e){switch(e.code){case"Space":this.togglePanel(),e.preventDefault();break;case"Escape":case"Tab":this.hide();break;default:break}}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement}),this.selfClick=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}bindDocumentClickListener(){if(!this.documentClickListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(e,"click",()=>{this.selfClick||(this.overlayVisible=!1,this.unbindDocumentClickListener()),this.selfClick=!1,this.cd.markForCheck()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentMousemoveListener(){if(!this.documentMousemoveListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentMousemoveListener=this.renderer.listen(e,"mousemove",i=>{this.colorDragging&&this.pickColor(i),this.hueDragging&&this.pickHue(i)})}}unbindDocumentMousemoveListener(){this.documentMousemoveListener&&(this.documentMousemoveListener(),this.documentMousemoveListener=null)}bindDocumentMouseupListener(){if(!this.documentMouseupListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentMouseupListener=this.renderer.listen(e,"mouseup",()=>{this.colorDragging=!1,this.hueDragging=!1,this.unbindDocumentMousemoveListener(),this.unbindDocumentMouseupListener()})}}unbindDocumentMouseupListener(){this.documentMouseupListener&&(this.documentMouseupListener(),this.documentMouseupListener=null)}bindDocumentResizeListener(){ut(this.platformId)&&(this.documentResizeListener=this.renderer.listen(this.window,"resize",this.onWindowResize.bind(this)))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!B.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new xt(this.containerViewChild?.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}validateHSB(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}}validateRGB(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}}validateHEX(e){var i=6-e.length;if(i>0){for(var r=[],a=0;a<i;a++)r.push("0");r.push(e),e=r.join("")}return e}HEXtoRGB(e){let i=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:i>>16,g:(i&65280)>>8,b:i&255}}HEXtoHSB(e){return this.RGBtoHSB(this.HEXtoRGB(e))}RGBtoHSB(e){var i={h:0,s:0,b:0},r=Math.min(e.r,e.g,e.b),a=Math.max(e.r,e.g,e.b),u=a-r;return i.b=a,i.s=a!=0?255*u/a:0,i.s!=0?e.r==a?i.h=(e.g-e.b)/u:e.g==a?i.h=2+(e.b-e.r)/u:i.h=4+(e.r-e.g)/u:i.h=-1,i.h*=60,i.h<0&&(i.h+=360),i.s*=100/255,i.b*=100/255,i}HSBtoRGB(e){var i={r:0,g:0,b:0};let r=e.h,a=e.s*255/100,u=e.b*255/100;if(a==0)i={r:u,g:u,b:u};else{let v=u,b=(255-a)*u/255,w=(v-b)*(r%60)/60;r==360&&(r=0),r<60?(i.r=v,i.b=b,i.g=b+w):r<120?(i.g=v,i.b=b,i.r=v-w):r<180?(i.g=v,i.r=b,i.b=b+w):r<240?(i.b=v,i.r=b,i.g=v-w):r<300?(i.b=v,i.g=b,i.r=b+w):r<360?(i.r=v,i.g=b,i.b=v-w):(i.r=0,i.g=0,i.b=0)}return{r:Math.round(i.r),g:Math.round(i.g),b:Math.round(i.b)}}RGBtoHEX(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];for(var r in i)i[r].length==1&&(i[r]="0"+i[r]);return i.join("")}HSBtoHEX(e){return this.RGBtoHEX(this.HSBtoRGB(e))}onOverlayHide(){this.unbindScrollListener(),this.unbindDocumentResizeListener(),this.unbindDocumentClickListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&this.autoZIndex&&Me.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}static \u0275fac=function(i){return new(i||t)(f(lt),f(Ce),f(be),f(Je),f(Se),f(yt),f(_t))};static \u0275cmp=E({type:t,selectors:[["p-colorPicker"]],viewQuery:function(i,r){if(i&1&&(U(vi,5),U(_i,5),U(yi,5),U(Ci,5),U(bi,5),U(Si,5)),i&2){let a;T(a=k())&&(r.containerViewChild=a.first),T(a=k())&&(r.inputViewChild=a.first),T(a=k())&&(r.colorSelector=a.first),T(a=k())&&(r.colorHandle=a.first),T(a=k())&&(r.hue=a.first),T(a=k())&&(r.hueHandle=a.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",inline:[P.HasDecoratorInputTransform,"inline","inline",N],format:"format",appendTo:"appendTo",disabled:[P.HasDecoratorInputTransform,"disabled","disabled",N],tabindex:"tabindex",inputId:"inputId",autoZIndex:[P.HasDecoratorInputTransform,"autoZIndex","autoZIndex",N],baseZIndex:[P.HasDecoratorInputTransform,"baseZIndex","baseZIndex",Ie],showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autofocus:[P.HasDecoratorInputTransform,"autofocus","autofocus",N]},outputs:{onChange:"onChange",onShow:"onShow",onHide:"onHide"},features:[K([Mi]),xe],decls:4,vars:11,consts:[[3,"ngStyle","ngClass"],["container",""],["type","text","class","p-colorpicker-preview p-inputtext","readonly","readonly","pAutoFocus","",3,"ngClass","disabled","backgroundColor","autofocus","click","keydown","focus",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],["type","text","readonly","readonly","pAutoFocus","",1,"p-colorpicker-preview","p-inputtext",3,"ngClass","disabled","autofocus","click","keydown","focus"],["input",""],[3,"ngClass","click"],[1,"p-colorpicker-content"],[1,"p-colorpicker-color-selector",3,"touchstart","touchmove","touchend","mousedown"],["colorSelector",""],[1,"p-colorpicker-color"],[1,"p-colorpicker-color-handle"],["colorHandle",""],[1,"p-colorpicker-hue",3,"mousedown","touchstart","touchmove","touchend"],["hue",""],[1,"p-colorpicker-hue-handle"],["hueHandle",""]],template:function(i,r){i&1&&(o(0,"div",0,1),p(2,Ei,2,11,"input",2)(3,Ti,11,18,"div",3),n()),i&2&&(Z(r.styleClass),d("ngStyle",r.style)("ngClass",Ee(8,ki,!r.inline,r.colorDragging||r.hueDragging)),x("data-pc-name","colorpicker")("data-pc-section","root"),s(2),d("ngIf",!r.inline),s(),d("ngIf",r.inline||r.overlayVisible))},dependencies:[M,V,J,Ve],styles:[`@layer primeng{.p-colorpicker{display:inline-block}.p-colorpicker-dragging{cursor:pointer}.p-colorpicker-overlay{position:relative}.p-colorpicker-panel{position:relative;width:193px;height:166px}.p-colorpicker-overlay-panel{position:absolute;top:0;left:0}.p-colorpicker-preview{cursor:pointer}.p-colorpicker-panel .p-colorpicker-content{position:relative}.p-colorpicker-panel .p-colorpicker-color-selector{width:150px;height:150px;top:8px;left:8px;position:absolute}.p-colorpicker-panel .p-colorpicker-color{width:150px;height:150px}.p-colorpicker-panel .p-colorpicker-color-handle{position:absolute;top:0;left:150px;border-radius:100%;width:10px;height:10px;border-width:1px;border-style:solid;margin:-5px 0 0 -5px;cursor:pointer;opacity:.85}.p-colorpicker-panel .p-colorpicker-hue{width:17px;height:150px;top:8px;left:167px;position:absolute;opacity:.85}.p-colorpicker-panel .p-colorpicker-hue-handle{position:absolute;top:150px;left:0;width:21px;margin-left:-2px;margin-top:-5px;height:10px;border-width:2px;border-style:solid;opacity:.85;cursor:pointer}}
`],encapsulation:2,data:{animation:[vt("overlayAnimation",[ze(":enter",[Be({opacity:0,transform:"scaleY(0.8)"}),Ne("{{showTransitionParams}}")]),ze(":leave",[Ne("{{hideTransitionParams}}",Be({opacity:0}))])])]},changeDetection:0})}return t})(),Vt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=X({type:t});static \u0275inj=G({imports:[I,De]})}return t})();function Di(t,m){t&1&&(o(0,"small",21),l(1,"Name is requried!"),n())}function Pi(t,m){t&1&&(o(0,"small",21),l(1,"Minimum 3 characters!"),n())}function qi(t,m){t&1&&(o(0,"small",21),l(1,"Icon is requried!"),n())}function Li(t,m){t&1&&(o(0,"small",21),l(1,"Minimum 3 characters!"),n())}var Dt=t=>({submitted:t});function Ai(t,m){if(t&1){let e=H();o(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),l(4),n(),o(5,"p"),l(6),n()(),o(7,"div",5)(8,"button",6),S("click",function(){_(e);let r=g();return y(r.onSubmitForm())}),c(9,"i"),o(10,"span"),l(11),n()(),o(12,"button",7),c(13,"i",8),o(14,"span"),l(15,"Cancel"),n()()(),o(16,"form",9)(17,"div",10)(18,"div",11)(19,"label",12),l(20,"Name"),n(),c(21,"input",13),p(22,Di,2,0,"small",14)(23,Pi,2,0,"small",14),n(),o(24,"div",15)(25,"label",16),l(26,"Icon"),n(),c(27,"input",17),p(28,qi,2,0,"small",14)(29,Li,2,0,"small",14),n()(),o(30,"div",18)(31,"label",19),l(32,"Color"),n(),c(33,"p-colorPicker",20),n()()()()}if(t&2){let e=g();s(4),O("",e.categoryId?"Edit":"Add"," Category"),s(2),O("You can ",e.categoryId?"edit":"add"," categories here"),s(3),Y("pi ",e.categoryId?"pi-cloud-upload":"pi-plus",""),s(2),q(e.categoryId?"Edit":"Add"),s(5),d("formGroup",e.form),s(5),d("ngClass",C(13,Dt,e.isSubmitted)),s(),d("ngIf",e.controlsForm.name.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.name.hasError("minlength")&&e.isSubmitted),s(4),d("ngClass",C(15,Dt,e.isSubmitted)),s(),d("ngIf",e.controlsForm.icon.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.icon.hasError("minlength")&&e.isSubmitted)}}function Ri(t,m){t&1&&(o(0,"div",22),c(1,"i",23),n())}var $e=(()=>{let m=class m{constructor(i,r,a,u,v){this.formBuilder=i,this.categoriesService=r,this.messageService=a,this.router=u,this.route=v,this.form=this.formBuilder.group({id:[""],name:["",[h.required,h.minLength(3)]],icon:["",[h.required,h.minLength(3)]],color:["#ffffff",[h.required]]}),this.categoryId="",this.isCmpInizialized=!1,this.isSubmitted=!1}ngOnInit(){this._checkParams()}onSubmitForm(){if(this.form.untouched)return this.categoryId?this.messageService.add({severity:"error",summary:"Error",detail:"Edit atleast 1 field!"}):this.messageService.add({severity:"error",summary:"Error",detail:"Fill the fields first!"});this.isSubmitted=!0,!this.form.invalid&&(this.categoryId?this._editCategory():this._addCategory())}_checkParams(){this.paramsSubscription=this.route.params.subscribe(i=>{i.categoryId?this.categoriesService.getCategoryById(i.categoryId).subscribe({next:r=>{this.categoryId=r.id,this.form.patchValue(r),this.isCmpInizialized=!0},error:r=>{console.error("Cannot get category",r)}}):this.isCmpInizialized=!0})}_addCategory(){this.categoriesService.addCategory(this.form.value).subscribe({next:i=>A(this,null,function*(){this.messageService.add({severity:"success",summary:"Success",detail:`The category "${i.name}" is created successfully!`}),yield D(R(2e3)),this.router.navigateByUrl("/categories")}),error:i=>{this.messageService.add({severity:"error",summary:"Error",detail:"The category cannot be created!"}),console.error("The category cannot be created!",i)}})}_editCategory(){this.categoriesService.editCategory(this.form.value).subscribe({next:i=>A(this,null,function*(){this.messageService.add({severity:"success",summary:"Success",detail:`The category "${i.name}" is edited successfully!`}),yield D(R(2e3)),this.router.navigateByUrl("/categories")}),error:i=>{this.messageService.add({severity:"error",summary:"Error",detail:"The category cannot be edited!"}),console.error("Cannot edit category",i)}})}get controlsForm(){return this.form.controls}ngOnDestroy(){this.paramsSubscription?.unsubscribe()}};m.\u0275fac=function(r){return new(r||m)(f(de),f(we),f(ue),f(te),f(ee))},m.\u0275cmp=E({type:m,selectors:[["admin-categories-form"]],standalone:!0,features:[z],decls:4,vars:2,consts:[["class","categories-form-modal",4,"ngIf","ngIfElse"],["loader",""],[1,"categories-form-modal"],[1,"categories-form-container"],[1,"categories-form-heading"],[1,"btns-container"],[1,"btn-create",3,"click"],["routerLink","/categories",1,"btn-cancel"],[1,"pi","pi-arrow-circle-left"],[3,"formGroup"],[1,"inputs-container"],[1,"name-input"],["for","name"],["formControlName","name","type","text","name","name","id","name",3,"ngClass"],["class","p-error",4,"ngIf"],[1,"icon-input"],["for","icon"],["formControlName","icon","type","text","name","icon","id","icon",3,"ngClass"],[1,"color-input"],["for","color"],["formControlName","color"],[1,"p-error"],[1,"loader"],[1,"pi","pi-spin","pi-spinner"]],template:function(r,a){if(r&1&&(p(0,Ai,34,17,"div",0),c(1,"p-toast"),p(2,Ri,2,0,"ng-template",null,1,W)),r&2){let u=$(3);d("ngIf",a.isCmpInizialized)("ngIfElse",u)}},dependencies:[I,M,V,ie,ke,se,ne,oe,ae,ce,le,me,he,pe,Vt,Ye]});let t=m;return t})();function Hi(t,m){t&1&&(o(0,"small",41),l(1,"Name is requried!"),n())}function Ui(t,m){t&1&&(o(0,"small",41),l(1,"Minimum 3 characters!"),n())}function Oi(t,m){t&1&&(o(0,"small",41),l(1,"Email is requried!"),n())}function Ni(t,m){t&1&&(o(0,"small",41),l(1,'Must contain email with "@"'),n())}function Bi(t,m){t&1&&(o(0,"small",41),l(1,"Password is requried!"),n())}function zi(t,m){t&1&&(o(0,"small",41),l(1,"Minimum 5 characters!"),n())}function ji(t,m){t&1&&(o(0,"small",41),l(1,"Phone is requried!"),n())}function Qi(t,m){t&1&&(o(0,"small",41),l(1,"Minimum 8 characters!"),n())}function Gi(t,m){t&1&&(o(0,"small",41),l(1,"Street is requried!"),n())}function Xi(t,m){t&1&&(o(0,"small",41),l(1,"Minimum 8 characters!"),n())}function Zi(t,m){t&1&&(o(0,"small",41),l(1,"Apartment is requried!"),n())}function Yi(t,m){t&1&&(o(0,"small",41),l(1,"Zip is requried!"),n())}function $i(t,m){t&1&&(o(0,"small",41),l(1,"Minimum 5 characters!"),n())}function Ki(t,m){t&1&&(o(0,"small",41),l(1,"City is requried!"),n())}function Wi(t,m){t&1&&(o(0,"small",41),l(1,"Minimum 3 characters!"),n())}function Ji(t,m){t&1&&(o(0,"small",41),l(1,"Country is requried!"),n())}function er(t,m){t&1&&(o(0,"small",41),l(1,"Minimum 3 characters!"),n())}var j=t=>({submitted:t});function tr(t,m){if(t&1){let e=H();o(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),l(4),n(),o(5,"p"),l(6),n()(),o(7,"div",5)(8,"button",6),S("click",function(){_(e);let r=g();return y(r.onSubmitForm())}),c(9,"i"),o(10,"span"),l(11),n()(),o(12,"button",7),c(13,"i",8),o(14,"span"),l(15,"Cancel"),n()()(),o(16,"form",9)(17,"div",10)(18,"div",11)(19,"label",12),l(20,"Name"),n(),c(21,"input",13),p(22,Hi,2,0,"small",14)(23,Ui,2,0,"small",14),n(),o(24,"div",15)(25,"label",16),l(26,"Email"),n(),c(27,"input",17),p(28,Oi,2,0,"small",14)(29,Ni,2,0,"small",14),n(),o(30,"div",18)(31,"label",19),l(32,"Password"),n(),c(33,"input",20),p(34,Bi,2,0,"small",14)(35,zi,2,0,"small",14),n(),o(36,"div",21)(37,"label",22),l(38,"Phone"),n(),c(39,"input",23),p(40,ji,2,0,"small",14)(41,Qi,2,0,"small",14),n(),o(42,"div",24)(43,"label",25),l(44,"Admin"),n(),c(45,"p-inputSwitch",26),n(),o(46,"div",27)(47,"label",22),l(48,"Street"),n(),c(49,"input",28),p(50,Gi,2,0,"small",14)(51,Xi,2,0,"small",14),n(),o(52,"div",29)(53,"label",30),l(54,"Apartment"),n(),c(55,"input",31),p(56,Zi,2,0,"small",14),n(),o(57,"div",32)(58,"label",33),l(59,"Zip"),n(),c(60,"input",34),p(61,Yi,2,0,"small",14)(62,$i,2,0,"small",14),n(),o(63,"div",35)(64,"label",36),l(65,"City"),n(),c(66,"input",37),p(67,Ki,2,0,"small",14)(68,Wi,2,0,"small",14),n(),o(69,"div",38)(70,"label",39),l(71,"Country"),n(),c(72,"p-dropdown",40),p(73,Ji,2,0,"small",14)(74,er,2,0,"small",14),n()()()()()}if(t&2){let e=g();s(4),O("",e.userId?"Edit":"Add"," User"),s(2),O("You can ",e.userId?"edit":"add"," users here"),s(3),Y("pi ",e.userId?"pi-cloud-upload":"pi-plus",""),s(2),q(e.userId?"Edit":"Add"),s(5),d("formGroup",e.form),s(5),d("ngClass",C(34,j,e.isSubmitted)),s(),d("ngIf",e.controlsForm.name.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.name.hasError("minlength")&&e.isSubmitted),s(4),d("ngClass",C(36,j,e.isSubmitted)),s(),d("ngIf",e.controlsForm.email.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.email.hasError("email")&&e.isSubmitted),s(4),d("ngClass",C(38,j,e.isSubmitted)),s(),d("ngIf",e.controlsForm.password.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.password.hasError("minlength")&&e.isSubmitted),s(4),d("ngClass",C(40,j,e.isSubmitted)),s(),d("ngIf",e.controlsForm.phone.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.phone.hasError("minlength")&&e.isSubmitted),s(8),d("ngClass",C(42,j,e.isSubmitted)),s(),d("ngIf",e.controlsForm.street.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.street.hasError("minlength")&&e.isSubmitted),s(4),d("ngClass",C(44,j,e.isSubmitted)),s(),d("ngIf",e.controlsForm.apartment.hasError("required")&&e.isSubmitted),s(4),d("ngClass",C(46,j,e.isSubmitted)),s(),d("ngIf",e.controlsForm.zip.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.zip.hasError("minlength")&&e.isSubmitted),s(4),d("ngClass",C(48,j,e.isSubmitted)),s(),d("ngIf",e.controlsForm.city.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.city.hasError("minlength")&&e.isSubmitted),s(4),d("options",e.countries)("filter",!0),s(),d("ngIf",e.controlsForm.country.hasError("required")&&e.isSubmitted),s(),d("ngIf",e.controlsForm.country.hasError("minlength")&&e.isSubmitted)}}function ir(t,m){t&1&&(o(0,"div",42),c(1,"i",43),n())}var Ke=(()=>{let m=class m{constructor(i,r,a,u,v){this.formBuilder=i,this.usersService=r,this.messageService=a,this.router=u,this.route=v,this.form=this.formBuilder.group({id:[""],name:["",[h.required,h.minLength(3)]],email:["",[h.required,h.email]],password:["",[h.required,h.minLength(5)]],phone:["",[h.required,h.minLength(8)]],isAdmin:[!1],street:["",[h.required,h.minLength(8)]],apartment:["",[h.required]],zip:["",[h.required,h.minLength(5)]],city:["",[h.required,h.minLength(3)]],country:["",[h.required]]}),this.userId="",this.countries=[],this.isCmpInizialized=!1,this.isSubmitted=!1}ngOnInit(){this._checkParams(),this._getCountries()}onSubmitForm(){if(this.form.untouched)return this.userId?this.messageService.add({severity:"error",summary:"Error",detail:"Edit atleast 1 field!"}):this.messageService.add({severity:"error",summary:"Error",detail:"Fill the fields first!"});this.isSubmitted=!0,!this.form.invalid&&(this.userId?this._editUser():this._addUser())}_checkParams(){this.paramsSubscription=this.route.params.subscribe(i=>{i.userId?this.usersService.getUserById(i.userId).subscribe({next:r=>{this.userId=r.id,this.form.patchValue(r),this.form.controls.password.setValidators([]),this.isCmpInizialized=!0},error:r=>{console.error("Cannot get user",r)}}):this.isCmpInizialized=!0})}_getCountries(){let i=this.usersService.getCountries();this.countries=i}_addUser(){this.usersService.addUser(this.form.value).subscribe({next:i=>A(this,null,function*(){this.messageService.add({severity:"success",summary:"Success",detail:`The user "${i.name}" is created successfully!`}),yield D(R(2e3)),this.router.navigateByUrl("/users")}),error:i=>{this.messageService.add({severity:"error",summary:"Error",detail:"The user cannot be created!"}),console.error("The user cannot be created!",i)}})}_editUser(){this.usersService.editUser(this.form.value).subscribe({next:i=>A(this,null,function*(){this.messageService.add({severity:"success",summary:"Success",detail:`The user "${i.name}" is edited successfully!`}),yield D(R(2e3)),this.router.navigateByUrl("/users")}),error:i=>{this.messageService.add({severity:"error",summary:"Error",detail:"The user cannot be edited!"}),console.error("Cannot edit user",i)}})}get controlsForm(){return this.form.controls}ngOnDestroy(){this.paramsSubscription?.unsubscribe()}};m.\u0275fac=function(r){return new(r||m)(f(de),f(Te),f(ue),f(te),f(ee))},m.\u0275cmp=E({type:m,selectors:[["admin-users-form"]],standalone:!0,features:[z],decls:4,vars:2,consts:[["class","users-form-modal",4,"ngIf","ngIfElse"],["loader",""],[1,"users-form-modal"],[1,"users-form-container"],[1,"users-form-heading"],[1,"btns-container"],[1,"btn-create",3,"click"],["routerLink","/users",1,"btn-cancel"],[1,"pi","pi-arrow-circle-left"],[3,"formGroup"],[1,"inputs-container"],[1,"name-input"],["for","name"],["formControlName","name","type","text","name","name","id","name",3,"ngClass"],["class","p-error",4,"ngIf"],[1,"email-input"],["for","email"],["formControlName","email","type","email","name","email","id","email",3,"ngClass"],[1,"password-input"],["for","password"],["formControlName","password","type","password","name","password","id","password",3,"ngClass"],[1,"phone-input"],["for","phone"],["formControlName","phone","type","tel","name","phone","id","phone",3,"ngClass"],[1,"admin-input"],["for","admin"],["formControlName","isAdmin","inputId","admin"],[1,"street-input"],["formControlName","street","type","text","name","street","id","street",3,"ngClass"],[1,"apartment-input"],["for","apartment"],["formControlName","apartment","type","text","name","apartment","id","apartment",3,"ngClass"],[1,"zip-input"],["for","zip"],["formControlName","zip","type","text","name","zip","id","zip",3,"ngClass"],[1,"city-input"],["for","city"],["formControlName","city","type","text","name","city","id","city",3,"ngClass"],[1,"country-input"],["for","country"],["formControlName","country","optionLabel","name","optionValue","id","filterBy","name","placeholder","Select a country",3,"options","filter"],[1,"p-error"],[1,"loader"],[1,"pi","pi-spin","pi-spinner"]],template:function(r,a){if(r&1&&(p(0,tr,75,50,"div",0),c(1,"p-toast"),p(2,ir,2,0,"ng-template",null,1,W)),r&2){let u=$(3);d("ngIf",a.isCmpInizialized&&a.countries.length)("ngIfElse",u)}},dependencies:[I,M,V,ie,ht,he,pe,ce,se,ne,oe,ae,le,me,Le,ye,qe,Pe]});let t=m;return t})();var An=[{path:"",component:Et,title:"Dashboard | Admin Panel",canActivate:[F]},{path:"products",loadComponent:()=>import("./chunk-7AKF2HJN.js").then(t=>t.ProductListComponent),title:"Products | Admin Panel",canActivate:[F],children:[{path:"form",component:Ze,title:"Add Product | Admin Panel",canActivate:[F]},{path:"form/:productId",component:Ze,title:"Edit Product | Admin Panel",canActivate:[F]}]},{path:"categories",loadComponent:()=>import("./chunk-FUNZ5SVG.js").then(t=>t.CategoriesComponent),title:"Categories | Admin Panel",canActivate:[F],children:[{path:"form",component:$e,title:"Add Category | Admin Panel",canActivate:[F]},{path:"form/:categoryId",component:$e,title:"Edit Category | Admin Panel",canActivate:[F]}]},{path:"orders",loadComponent:()=>import("./chunk-NISQR4I7.js").then(t=>t.OrdersListComponent),title:"Orders | Admin Panel",canActivate:[F]},{path:"orders/:orderId",loadComponent:()=>import("./chunk-IZWJ7G5Q.js").then(t=>t.OrdersDetailsComponent),title:"Order Details | Admin Panel",canActivate:[F]},{path:"users",loadComponent:()=>import("./chunk-4BBW3KH4.js").then(t=>t.UsersListComponent),title:"Users | Admin Panel",canActivate:[F],children:[{path:"form",component:Ke,title:"Add User | Admin Panel",canActivate:[F]},{path:"form/:userId",component:Ke,title:"Edit User | Admin Panel",canActivate:[F]}]}];export{An as adminRoutes};
